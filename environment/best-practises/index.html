<!DOCTYPE html>
<html class="no-js" lang="en"> <head><meta charset="utf-8"/><meta content="width=device-width,initial-scale=1" name="viewport"/><link href="../../assets/images/favicon.png" rel="icon"/><meta content="mkdocs-1.4.2, mkdocs-material-9.1.0" name="generator"/><title>Best practises - SuperComputing Luxembourg - National Competence Center</title><link href="../../assets/stylesheets/main.402914a4.min.css" rel="stylesheet"/><link href="../../assets/stylesheets/palette.a0c5b2b5.min.css" rel="stylesheet"/><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1 7.775V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 0 1 0 2.474l-5.026 5.026a1.75 1.75 0 0 1-2.474 0l-6.25-6.25A1.752 1.752 0 0 1 1 7.775Zm1.5 0c0 .066.026.13.073.177l6.25 6.25a.25.25 0 0 0 .354 0l5.025-5.025a.25.25 0 0 0 0-.354l-6.25-6.25a.25.25 0 0 0-.177-.073H2.75a.25.25 0 0 0-.25.25ZM6 5a1 1 0 1 1 0 2 1 1 0 0 1 0-2Z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M3.499.75a.75.75 0 0 1 1.5 0v.996C5.9 2.903 6.793 3.65 7.662 4.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873 10.794-.045 12.622.26 14.408.558 16 1.94 16 4.25c0 1.278-.954 2.575-2.44 2.734l.146.508.065.22c.203.701.412 1.455.476 2.226.142 1.707-.4 3.03-1.487 3.898C11.714 14.671 10.27 15 8.75 15h-6a.75.75 0 0 1 0-1.5h1.376a4.484 4.484 0 0 1-.563-1.191 3.835 3.835 0 0 1-.05-2.063 4.647 4.647 0 0 1-2.025-.293.75.75 0 0 1 .525-1.406c1.357.507 2.376-.006 2.698-.318l.009-.01a.747.747 0 0 1 1.06 0 .748.748 0 0 1-.012 1.074c-.912.92-.992 1.835-.768 2.586.221.74.745 1.337 1.196 1.621H8.75c1.343 0 2.398-.296 3.074-.836.635-.507 1.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.425 2.425 0 0 1-.507-.441 3.075 3.075 0 0 1-.633-1.248.75.75 0 0 1 1.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738 0 1.25-.615 1.25-1.25 0-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706 1.345-.46.92-.27 1.774.019 3.062l.042.19a.884.884 0 0 1 .01.05c.348.443.666.949.94 1.553a.75.75 0 1 1-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7 5.527c-.814-.68-1.75-1.462-2.692-2.619a3.737 3.737 0 0 0-1.023.88c-.406.495-.663 1.036-.722 1.508.116.122.306.21.591.239.388.038.797-.06 1.032-.19a.75.75 0 0 1 .728 1.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75 5.677V5.5c0-.984.48-1.94 1.077-2.664.46-.559 1.05-1.055 1.673-1.353V.75Z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.92 6.085h.001a.749.749 0 1 1-1.342-.67c.169-.339.436-.701.849-.977C6.845 4.16 7.369 4 8 4a2.756 2.756 0 0 1 1.637.525c.503.377.863.965.863 1.725 0 .448-.115.83-.329 1.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6.24 6.24 0 0 0-.26.16.952.952 0 0 0-.276.245.75.75 0 0 1-1.248-.832c.184-.264.42-.489.692-.661.103-.067.207-.132.313-.195l.007-.004c.1-.061.182-.11.258-.161a.969.969 0 0 0 .277-.245C8.96 6.514 9 6.427 9 6.25a.612.612 0 0 0-.262-.525A1.27 1.27 0 0 0 8 5.5c-.369 0-.595.09-.74.187a1.01 1.01 0 0 0-.34.398ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M6.457 1.047c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0 1 14.082 15H1.918a1.75 1.75 0 0 1-1.543-2.575Zm1.763.707a.25.25 0 0 0-.44 0L1.698 13.132a.25.25 0 0 0 .22.368h12.164a.25.25 0 0 0 .22-.368Zm.53 3.996v2.5a.75.75 0 0 1-1.5 0v-2.5a.75.75 0 0 1 1.5 0ZM9 11a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343h-.001a8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746Zm1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275ZM6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.749.749 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.749.749 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.749.749 0 0 1 .215-.734L6.94 8 4.97 6.03a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018Z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M9.504.43a1.516 1.516 0 0 1 2.437 1.713L10.415 5.5h2.123c1.57 0 2.346 1.909 1.22 3.004l-7.34 7.142a1.249 1.249 0 0 1-.871.354h-.302a1.25 1.25 0 0 1-1.157-1.723L5.633 10.5H3.462c-1.57 0-2.346-1.909-1.22-3.004L9.503.429Zm1.047 1.074L3.286 8.571A.25.25 0 0 0 3.462 9H6.75a.75.75 0 0 1 .694 1.034l-1.713 4.188 6.982-6.793A.25.25 0 0 0 12.538 7H9.25a.75.75 0 0 1-.683-1.06l2.008-4.418.003-.006a.036.036 0 0 0-.004-.009l-.006-.006-.008-.001c-.003 0-.006.002-.009.004Z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.488 3.488 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327c0 .1-.009.197-.025.292.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5c0 .409-.049.806-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A4.997 4.997 0 0 1 8 16a4.997 4.997 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5.036 5.036 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.677 1.677 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06Zm.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.172.172 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173Z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M5 5.782V2.5h-.25a.75.75 0 0 1 0-1.5h6.5a.75.75 0 0 1 0 1.5H11v3.282l3.666 5.76C15.619 13.04 14.543 15 12.767 15H3.233c-1.776 0-2.852-1.96-1.899-3.458Zm-2.4 6.565a.75.75 0 0 0 .633 1.153h9.534a.75.75 0 0 0 .633-1.153L12.225 10.5h-8.45ZM9.5 2.5h-3V6c0 .143-.04.283-.117.403L4.73 9h6.54L9.617 6.403A.746.746 0 0 1 9.5 6Z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M1.75 2.5h10.5a.75.75 0 0 1 0 1.5H1.75a.75.75 0 0 1 0-1.5Zm4 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5Zm0 5h8.5a.75.75 0 0 1 0 1.5h-8.5a.75.75 0 0 1 0-1.5ZM2.5 7.75v6a.75.75 0 0 1-1.5 0v-6a.75.75 0 0 1 1.5 0Z"/></svg>');}</style><link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../../stylesheets/extra.css" rel="stylesheet"/><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-Q3V4FYR53V"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-Q3V4FYR53V",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-Q3V4FYR53V",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            
                .gscrollbar-fixer { padding-right: 15px; }
                .gdesc-inner { font-size: 0.75rem; }
                body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
                body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
                body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
                </style><script src="../../assets/javascripts/glightbox.min.js"></script></head> <body data-md-color-accent="" data-md-color-primary="" data-md-color-scheme="default" dir="ltr"> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/> <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/> <label class="md-overlay" for="__drawer"></label> <div data-md-component="skip"> <a class="md-skip" href="#an-introduction-to-conda-and-environment-management"> Skip to content </a> </div> <div data-md-component="announce"> </div> <div data-md-color-scheme="default" data-md-component="outdated" hidden=""> </div> <header class="md-header" data-md-component="header"> <nav aria-label="Header" class="md-header__inner md-grid"> <a aria-label="SuperComputing Luxembourg - National Competence Center" class="md-header__button md-logo" data-md-component="logo" href="../.." title="SuperComputing Luxembourg - National Competence Center"> <img alt="logo" src="../../figures/Logo_SC_Luxembourg.png"/> </a> <label class="md-header__button md-icon" for="__drawer"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class="md-header__title" data-md-component="header-title"> <div class="md-header__ellipsis"> <div class="md-header__topic"> <span class="md-ellipsis"> SuperComputing Luxembourg - National Competence Center </span> </div> <div class="md-header__topic" data-md-component="header-topic"> <span class="md-ellipsis"> Best practises </span> </div> </div> </div> <form class="md-header__option" data-md-component="palette"> <input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="default" id="__palette_1" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_2" hidden="" title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class="md-option" data-md-color-accent="" data-md-color-media="" data-md-color-primary="" data-md-color-scheme="slate" id="__palette_2" name="__palette" type="radio"/> <label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <label class="md-header__button md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class="md-search" data-md-component="search" role="dialog"> <label class="md-search__overlay" for="__search"></label> <div class="md-search__inner" role="search"> <form class="md-search__form" name="search"> <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/> <label class="md-search__icon md-icon" for="__search"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label="Search" class="md-search__options"> <button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class="md-search__output"> <div class="md-search__scrollwrap" data-md-scrollfix=""> <div class="md-search-result" data-md-component="search-result"> <div class="md-search-result__meta"> Initializing search </div> <ol class="md-search-result__list" role="presentation"></ol> </div> </div> </div> </div> </div> <div class="md-header__source"> <a class="md-source" data-md-component="source" href="https://github.com/NCCLUX/NCC-Trainings.git" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class="md-source__repository"> NCCLUX/NCC-Trainings </div> </a> </div> </nav> </header> <div class="md-container" data-md-component="container"> <nav aria-label="Tabs" class="md-tabs" data-md-component="tabs"> <div class="md-grid"> <ul class="md-tabs__list"> <li class="md-tabs__item"> <a class="md-tabs__link" href="../.."> Trainings organization </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../openmp/"> Courses </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../Bootcamps/ai/introduction/"> Bootcamp </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../Hackathons/hpda/introduction/"> Hackathons </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../education/introduction/"> Instructions for Educators </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../calendar/future/"> Calendar </a> </li> <li class="md-tabs__item"> <a class="md-tabs__link" href="../../other-training/othertraining/"> Other Training Events </a> </li> </ul> </div> </nav> <main class="md-main" data-md-component="main"> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0"> <label class="md-nav__title" for="__drawer"> <a aria-label="SuperComputing Luxembourg - National Competence Center" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="SuperComputing Luxembourg - National Competence Center"> <img alt="logo" src="../../figures/Logo_SC_Luxembourg.png"/> </a> SuperComputing Luxembourg - National Competence Center </label> <div class="md-nav__source"> <a class="md-source" data-md-component="source" href="https://github.com/NCCLUX/NCC-Trainings.git" title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"></path></svg> </div> <div class="md-source__repository"> NCCLUX/NCC-Trainings </div> </a> </div> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../.."> Trainings organization </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0"> Courses <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_2"> <span class="md-nav__icon md-icon"></span> Courses </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0"> Parallel Programming <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_1"> <span class="md-nav__icon md-icon"></span> Parallel Programming </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_1" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_1" id="__nav_2_1_1_label" tabindex="0"> CPU <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_1_label" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="__nav_2_1_1"> <span class="md-nav__icon md-icon"></span> CPU </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_1_1" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_1_1" id="__nav_2_1_1_1_label" tabindex="0"> OpenMP <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_1_1_label" class="md-nav" data-md-level="4"> <label class="md-nav__title" for="__nav_2_1_1_1"> <span class="md-nav__icon md-icon"></span> OpenMP </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/preparation/"> Preparation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_1_1_3" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_1_1_3" id="__nav_2_1_1_1_3_label" tabindex="0"> Hands-On <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_1_1_3_label" class="md-nav" data-md-level="5"> <label class="md-nav__title" for="__nav_2_1_1_1_3"> <span class="md-nav__icon md-icon"></span> Hands-On </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/exercise-1/"> Parallel Region </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/exercise-2/"> Data Sharing Attribute </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/exercise-3/"> Work Sharing Constructs(loop) </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/exercise-4/"> Work Sharing Constructs(loop-scheduling) </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/exercise-5/"> Worksharing Constructs(others) </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/exercise-6/"> SIMD and Others </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openmp/profiling/"> Profiling and Performance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_2" id="__nav_2_1_2_label" tabindex="0"> GPU <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_2_label" class="md-nav" data-md-level="3"> <label class="md-nav__title" for="__nav_2_1_2"> <span class="md-nav__icon md-icon"></span> GPU </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_2_1" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_2_1" id="__nav_2_1_2_1_label" tabindex="0"> CUDA <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_2_1_label" class="md-nav" data-md-level="4"> <label class="md-nav__title" for="__nav_2_1_2_1"> <span class="md-nav__icon md-icon"></span> CUDA </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/preparation/"> Preparation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_2_1_3" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_2_1_3" id="__nav_2_1_2_1_3_label" tabindex="0"> Hands-On <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_2_1_3_label" class="md-nav" data-md-level="5"> <label class="md-nav__title" for="__nav_2_1_2_1_3"> <span class="md-nav__icon md-icon"></span> Hands-On </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/exercise-1/"> Hello World </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/exercise-2/"> Vector Addition </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/exercise-3/"> Matrix Multiplication </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/exercise-4/"> Shared Memory </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/exercise-5/"> Unified Memory </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../cuda/profiling/"> Profiling and Performance </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_2_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_2_2" id="__nav_2_1_2_2_label" tabindex="0"> OpenACC <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_2_2_label" class="md-nav" data-md-level="4"> <label class="md-nav__title" for="__nav_2_1_2_2"> <span class="md-nav__icon md-icon"></span> OpenACC </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/preparation/"> Preparation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_1_2_2_3" type="checkbox"/> <label class="md-nav__link" for="__nav_2_1_2_2_3" id="__nav_2_1_2_2_3_label" tabindex="0"> Hands-On <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_1_2_2_3_label" class="md-nav" data-md-level="5"> <label class="md-nav__title" for="__nav_2_1_2_2_3"> <span class="md-nav__icon md-icon"></span> Hands-On </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/exercise-1/"> Compute Constructs and Paralleize Loops </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/exercise-2/"> Data Locality </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/exercise-3/"> Optimize Loops </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/exercise-4/"> Unified Memory </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../openacc/profiling/"> Profiling and Performance </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/> <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0"> Python in the HPC <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_2"> <span class="md-nav__icon md-icon"></span> Python in the HPC </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../python/"> Jupyter server and parallel libraries </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/> <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0"> Environment management and containers <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_2_3"> <span class="md-nav__icon md-icon"></span> Environment management and containers </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../conda/"> Environment managers </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../R/"> Package management in R </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../containers/"> Containers </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/> <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0"> Bootcamp <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_3"> <span class="md-nav__icon md-icon"></span> Bootcamp </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/> <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0"> AI <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_3_1"> <span class="md-nav__icon md-icon"></span> AI </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../Bootcamps/ai/introduction/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Bootcamps/ai/preparation/"> Preparation </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../Bootcamps/ai/handson/"> Hands-on </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/> <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0"> Hackathons <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_4"> <span class="md-nav__icon md-icon"></span> Hackathons </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_4_1" type="checkbox"/> <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0"> HPDA <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_4_1_label" class="md-nav" data-md-level="2"> <label class="md-nav__title" for="__nav_4_1"> <span class="md-nav__icon md-icon"></span> HPDA </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../Hackathons/hpda/introduction/"> Introduction </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/> <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0"> Instructions for Educators <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_5"> <span class="md-nav__icon md-icon"></span> Instructions for Educators </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../education/introduction/"> Introduction </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../education/requirements/"> Requirements </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/> <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0"> Calendar <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1"> <label class="md-nav__title" for="__nav_6"> <span class="md-nav__icon md-icon"></span> Calendar </label> <ul class="md-nav__list" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="../../calendar/future/"> Future Events </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../calendar/past/"> Past Events </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="../../other-training/othertraining/"> Other Training Events </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc"> <div class="md-sidebar__scrollwrap"> <div class="md-sidebar__inner"> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class="md-nav__title" for="__toc"> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix=""> <li class="md-nav__item"> <a class="md-nav__link" href="#pre-requisites"> Pre-requisites </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#a-brief-introduction-to-conda"> A brief introduction to Conda </a> <nav aria-label="A brief introduction to Conda" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#package-managers"> Package managers </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#channels"> Channels </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#distributions"> Distributions </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#the-micromamba-package-manager"> The Micromamba package manager </a> <nav aria-label="The Micromamba package manager" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#installation"> Installation </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#managing-environments"> Managing environments </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#using-environments-in-submission-scripts"> Using environments in submission scripts </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#exporting-and-importing-environment-specifications"> Exporting and importing environment specifications </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#example-installing-jupyter-and-managing-the-dependencies-of-a-notebook-with-micromamba"> Example: Installing Jupyter and managing the dependencies of a notebook with Micromamba </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#self-management-of-work-environments-in-ul-hpc-with-conda"> Self management of work environments in UL HPC with Conda </a> <nav aria-label="Self management of work environments in UL HPC with Conda" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#when-a-conda-environment-is-useful"> When a Conda environment is useful </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#storage-limitations-in-ul-hpc"> Storage limitations in UL HPC </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#cleaning-up-package-data"> Cleaning up package data </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#a-note-about-internal-workings-of-conda"> A note about internal workings of Conda </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#environment-management-best-practices"> Environment management best practices </a> <nav aria-label="Environment management best practices" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#using-pip-for-python-package-management"> Using pip for Python package management </a> <nav aria-label="Using pip for Python package management" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#python-venv-virtual-environments"> Python venv virtual environments </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#creating-a-venv-environment-with-python-installed-in-a-conda-environment"> Creating a venv environment with Python installed in a Conda environment </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#example-installing-jupyter-and-managing-the-dependencies-of-a-notebook-with-pip"> Example: Installing Jupyter and managing the dependencies of a notebook with pip </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#combining-conda-with-other-package-management-tools"> Combining Conda with other package management tools </a> <nav aria-label="Combining Conda with other package management tools" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#installing-packages-with-pip-in-a-conda-environment"> Installing packages with pip in a Conda environment </a> <nav aria-label="Installing packages with pip in a Conda environment" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#installing-all-dependencies-on-a-venv-environment"> Installing all dependencies on a venv environment </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#installing-all-dependencies-from-pypi-with-pip-on-the-conda-environment"> Installing all dependencies from PyPI with pip on the Conda environment </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#mixing-packages-from-conda-channels-and-pypi"> Mixing packages from Conda channels and PyPI </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#combining-conda-with-pip-to-install-a-python-source-package"> Combining Conda with pip to install a Python source package </a> </li> </ul> </nav> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#managing-packages-in-r"> Managing packages in R </a> <nav aria-label="Managing packages in R" class="md-nav"> <ul class="md-nav__list"> <li class="md-nav__item"> <a class="md-nav__link" href="#installing-r-packages-locally-and-globally"> Installing R packages locally and globally </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#configuring-installation-paths-in-r"> Configuring installation paths in R </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#installing-packages-in-r-project-directories-with-packrat"> Installing packages in R project directories with Packrat </a> </li> <li class="md-nav__item"> <a class="md-nav__link" href="#issues-with-managing-packages-with-the-native-r-package-managers"> Issues with managing packages with the native R package managers </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-content" data-md-component="content"> <article class="md-content__inner md-typeset"> <p><a href="https://hpc.uni.lu"><img alt="By ULHPC" src="https://img.shields.io/badge/by-ULHPC-blue.svg"/></a> <a href="http://www.gnu.org/licenses/gpl-3.0.html"><img alt="Licence" src="https://img.shields.io/badge/license-GPL--3.0-blue.svg"/></a> <a href="https://github.com/ULHPC/tutorials/issues/"><img alt="GitHub issues" src="https://img.shields.io/github/issues/ULHPC/tutorials.svg"/></a> <a href="https://github.com/ULHPC/tutorials/raw/devel/path/to/slides.pdf"><img alt="" src="https://img.shields.io/badge/slides-PDF-red.svg"/></a> <a href="https://github.com/ULHPC/tutorials/tree/devel/path/to/"><img alt="Github" src="https://img.shields.io/badge/sources-github-green.svg"/></a> <a href="http://ulhpc-tutorials.readthedocs.io/en/latest/path/to/"><img alt="Documentation Status" src="http://readthedocs.org/projects/ulhpc-tutorials/badge/?version=latest"/></a> <a href="https://github.com/ULHPC/tutorials"><img alt="GitHub forks" src="https://img.shields.io/github/stars/ULHPC/tutorials.svg?style=social&amp;label=Star"/></a></p> <h1 id="an-introduction-to-conda-and-environment-management">An introduction to Conda and environment management<a class="headerlink" href="#an-introduction-to-conda-and-environment-management" title="Permanent link">¶</a></h1> <blockquote> <p>Copyright © 2023 UL HPC Team <a href="mailto:hpc-sysadmins@uni.lu">hpc-sysadmins@uni.lu</a><br/> Author: Georgios Kafanas</p> </blockquote> <!--
[![](https://github.com/ULHPC/tutorials/raw/devel/path/to/cover_slides.png)](https://github.com/ULHPC/tutorials/raw/devel/path/to/slides.pdf)
--> <p>The objective of this tutorial is to cover the basics of package management with Conda. Conda environments can simultaneously install dependencies from multiple software distributions, such as Python and R. Package management systems native to distributions of Python, R, and Julia will also be covered to demonstrate how Conda can interface with such systems.</p> <p>In this tutorial the users will learn to:</p> <ul> <li>use Conda environments to manage the software and package dependencies of projects,</li> <li>document and exchange Conda environment setups for reproducibility,</li> <li>determine which is the best environment management tool given the requirements of a project, and</li> <li>instal packages using the facilities available in R, Python, and Julia when these packages are not available in Conda.</li> </ul> <hr/> <h2 id="pre-requisites">Pre-requisites<a class="headerlink" href="#pre-requisites" title="Permanent link">¶</a></h2> <p>This tutorial focuses on generic aspects of package management. It is assumed that you have some basic knowledge of how to use packages in R or Python. The main package management framework used is Conda, although there will be mentions to tools native to R, Python, and Julia. You can use the techniques covered here both in your personal machine and on the UL HPC clusters. If you would like to setup environments in the UL HPC clusters, please ensure that you are able to <a href="https://hpc-docs.uni.lu/connect/access/">connect</a> first.</p> <hr/> <h2 id="a-brief-introduction-to-conda">A brief introduction to Conda<a class="headerlink" href="#a-brief-introduction-to-conda" title="Permanent link">¶</a></h2> <p>You must be familiar with a few concepts to start working with Conda. In brief, these concepts are <em>package managers</em> which are the programs used to create and manage environments, <em>channels</em> which are the repositories that contain the packages from which environments are composed, and <em>distributions</em> which are systems for shipping package managers.</p> <h3 id="package-managers">Package managers<a class="headerlink" href="#package-managers" title="Permanent link">¶</a></h3> <p>Package managers are the programs that install and manage the Conda environments. There are multiple package managers, such as <a href="https://docs.conda.io/projects/conda/en/stable/"><code>conda</code></a>, <a href="https://mamba.readthedocs.io/en/latest/user_guide/mamba.html"><code>mamba</code></a>, and <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html"><code>micromamba</code></a>.</p> <p>The UL HPC centre supports the use of <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html"><code>micromamba</code></a> for the creation and management of personal Conda environments.</p> <h3 id="channels">Channels<a class="headerlink" href="#channels" title="Permanent link">¶</a></h3> <p>Conda <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/concepts/channels.html#what-is-a-conda-channel">channels</a> are the locations where packages are stored. There are also multiple channels, with some important channels being:</p> <ul> <li><a href="https://repo.anaconda.com/pkgs/"><code>defaults</code></a>, the default channel,</li> <li><a href="https://anaconda.org/anaconda"><code>anaconda</code></a>, a mirror of the default channel,</li> <li><a href="https://anaconda.org/bioconda"><code>bioconda</code></a>, a distribution of bioinformatics software, and</li> <li><a href="https://anaconda.org/conda-forge"><code>conda-forge</code></a>, a community-led collection of recipes, build infrastructure, and distributions for the conda package manager.</li> </ul> <p>The most useful channel that comes pre-installed in all distributions, is Conda-Forge. Channels are usually hosted in the <a href="https://anaconda.org/">official Anaconda page</a>, but in some rare occasions <a href="https://conda.io/projects/conda/en/latest/user-guide/tasks/create-custom-channels.html">custom channels</a> may be used. For instance the <a href="https://repo.anaconda.com/pkgs/">default channel</a> is hosted independently from the official Anaconda page. Many channels also maintain web pages with documentation both for their usage and for packages they distribute:</p> <ul> <li><a href="https://docs.anaconda.com/free/anaconda/reference/default-repositories/">Default Conda channel</a></li> <li><a href="https://bioconda.github.io/">Bioconda</a></li> <li><a href="https://conda-forge.org/">Conda-Forge</a></li> </ul> <h3 id="distributions">Distributions<a class="headerlink" href="#distributions" title="Permanent link">¶</a></h3> <p>Quite often, the package manager is not distributed on its own, but with a set of packages that are required for the package manager to work, or even with some additional packages that required for most applications. For instance, the <code>conda</code> package manager is distributed with the Miniconda and Anaconda distributions. Miniconda contains the bare minimum packages for the <code>conda</code> package manager to work, and Anaconda contains multiple commonly used packages and a graphical user interface. The relation between these distributions and the package manager is depicted in the following diagram.</p> <p><a href="../images/Miniconda-vs-Anaconda.jpg"><img alt="" src="../images/Miniconda-vs-Anaconda.jpg"/></a></p> <p>The situation is similar for <a href="https://mamba.readthedocs.io/en/latest/index.html">Mamba</a> distributions. Mamba distributions are supported by <a href="https://github.com/conda-forge/miniforge">Conda-Forge</a>, and their default installation options set-up <code>conda-forge</code> as the default and only channel during installation. The <code>defaults</code> or its mirror <code>anaconda</code> must be explicitly added if required. The distribution using the <a href="https://mamba.readthedocs.io/en/latest/user_guide/mamba.html">Mamba</a> package manager was originally distributed as Mambaforge and was <a href="https://github.com/conda-forge/miniforge#whats-the-difference-between-mambaforge-and-miniforge">recently renamed</a> to Miniforge. Miniforge comes with a minimal set of python packages required by the Mamba package manager. The distribution using the <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html">Micromamba</a> package manager ships no accompanying packages, as Micromamba is a standalone executable with no dependencies. Micromamba is using <a href="https://mamba.readthedocs.io/en/latest/index.html"><code>libmamba</code></a>, a C++ library implementing the Conda API.</p> <h2 id="the-micromamba-package-manager">The Micromamba package manager<a class="headerlink" href="#the-micromamba-package-manager" title="Permanent link">¶</a></h2> <p><a href="https://mamba.readthedocs.io/en/latest/index.html"><img alt="" src="https://mamba.readthedocs.io/en/latest/_static/logo.png" style="width:200px; margin-right:10px; float: left;"/></a></p> <p>The <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html">Micromaba</a> package manager is a minimal yet fairly complete implementation of the Conda interface in C++, which is shipped as a standalone executable. The package manager operates strictly on the user-space and thus it requires no special permissions to install packages. It maintains all its files in a couple of places, so uninstalling the package manager itself is also easy. Finally, the package manager is also lightweight and fast.</p> <p>UL HPC provides support <em>only</em> for the Micromamba package manager.</p> <h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">¶</a></h3> <p>A complete guide regarding Micromamba installation can be found in the <a href="https://mamba.readthedocs.io/en/latest/micromamba-installation.html">official documentation</a>. To install micromamaba in the HPC clusters, log in to Aion or Iris. Working on a login node, run the installation script, <div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="s2">"</span><span class="si">${</span><span class="nv">SHELL</span><span class="si">}</span><span class="s2">"</span><span class="w"> </span>&lt;<span class="o">(</span>curl<span class="w"> </span>-L<span class="w"> </span>micro.mamba.pm/install.sh<span class="o">)</span>
</span></code></pre></div> which will install the executable and setup the environment. There are 4 options to select during the installation of Micromamba:</p> <ul> <li>The directory for the installation of the binary file: <div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a>Micromamba binary folder? [~/.local/bin]
</span></code></pre></div> Leave empty and press enter to select the default displayed within brackets. Your <code>.bashrc</code> script should include <code>~/.local/bin</code> in the <code>$PATH</code> by default.</li> <li>The option to add to the environment autocomplete options for <code>micromamba</code>: <div class="language-text highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a>Init shell (bash)? [Y/n]
</span></code></pre></div> Press enter to select the default option <code>Y</code>. This will append a clearly marked section in the <code>.bashrc</code> shell. Do not forget to remove this section when uninstalling Micromamba.</li> <li>The option to configure the channels by adding conda-forge: <div class="language-text highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a>Configure conda-forge? [Y/n]
</span></code></pre></div> Press enter to select the default option <code>Y</code>. This will setup the <code>~/.condarc</code> file with <code>conda-forge</code> as the default channel. Note that Mamba and Micromamba will not use the <code>defaults</code> channel if it is not present in <code>~/.condarc</code> like <code>conda</code>.</li> <li>The option to select the directory where environment information and packages will be stored: <div class="language-text highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a>Prefix location? [~/micromamba]
</span></code></pre></div> Press enter to select the default option displayed within brackets.</li> </ul> <p>To activate the new environment log-out and log-in again. You now can use <code>micromamba</code> in the login and compute nodes, including the auto-completion feature.</p> <h3 id="managing-environments">Managing environments<a class="headerlink" href="#managing-environments" title="Permanent link">¶</a></h3> <p>As an example we consider the creation and use of an environment for R jobs. The command, <div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>R-project
</span></code></pre></div> creates an environment named <code>R-project</code>. The environment is activated with the command <div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>activate<span class="w"> </span>R-project
</span></code></pre></div> anywhere in the file system.</p> <p>Next, install the base R environment package that contains the R program, and any R packages required by the project. To install packages, first ensure that the <code>R-project</code> environment is active, and then install any package with the command <div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>install<span class="w"> </span>&lt;package_name&gt;
</span></code></pre></div> all the required packages. Quite often, the channel where Conda should first look for the package must also be specified. Using the syntax <div class="language-bash highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>install<span class="w"> </span>--chanell<span class="w"> </span>&lt;chanell_1&gt;<span class="w"> </span>--channels<span class="w"> </span>&lt;chanell_2&gt;<span class="w"> </span>&lt;package_name&gt;
</span></code></pre></div> channels are listed in a series of <code>--channel &lt;channel_name&gt;</code> entries and the channels are searched in the order they appear. Using the syntax <div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>install<span class="w"> </span>&lt;chanell&gt;::&lt;package_name&gt;
</span></code></pre></div> packages are searched in the specified channel only. Available packages can be found by searching the <a href="https://anaconda.org/conda-forge">conda-forge channel</a>.</p> <p>For instance, the basic functionality of the R software environment is contained in the <code>r-base</code> package. Calling <div class="language-bash highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a>micromamba<span class="w"> </span>install<span class="w"> </span>--channel<span class="w"> </span>conda-forge<span class="w"> </span>r-base
</span></code></pre></div> or <div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a>micromamba<span class="w"> </span>install<span class="w"> </span>conda-forge::r-base
</span></code></pre></div> will install all the components required to run standalone R scripts. More involved scripts use functionality defined in various packages. The R packages are prepended with a prefix 'r-'. Thus, <code>plm</code> becomes <code>r-plm</code> and so on. After all the required packages have been installed, the environment is ready for use.</p> <p>Packages in the conda-forge channel come with instructions for their installation. Quite often the channel is specified in the installation instructions, <code>conda-forge::&lt;package name&gt;</code> or even <code>-c conda-forge</code> or <code>--channel conda-forge</code>. While the Micromamba installer sets-up <code>conda-forge</code> as the default channel, latter modification in <code>~/.condarc</code> may change the channel priority. Thus it is a good practice to explicitly specify the source channel when installing a package.</p> <p>After work in an environment is complete, deactivate the environment, <div class="language-bash highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>deactivate
</span></code></pre></div> to ensure that it does not interfere with any other operations. In contrast to <a href="modules.md">modules</a>, Conda is designed to operate with a single environment active at a time. Create one environment for each project, and Conda will ensure that any package that is shared between multiple environments is installed once.</p> <p>Micromamba supports almost all the subcommands of Conda. For more details see the <a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html">official documentation</a>.</p> <h3 id="using-environments-in-submission-scripts">Using environments in submission scripts<a class="headerlink" href="#using-environments-in-submission-scripts" title="Permanent link">¶</a></h3> <p>Since all computationally heavy operations must be performed in compute nodes, Conda environments are also used in jobs submitted to the <a href="https://hpc-docs.uni.lu/slurm/">queuing system</a>. You can activate and deactivate environment in various sections of your script.</p> <p>Returning to the R example, a submission script running a single core R job can use the <code>R-project_name</code> environment as follows: <div class="language-text highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a>#SBATCH --job-name R-test-job
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>#SBATCH --nodes 1
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a>#SBATCH --ntasks-per-node 1
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a>#SBATCH --cpus-per-task 1
</span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>#SBATCH --time=0-02:00:00
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>#SBATCH --partition batch
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a>#SBATCH --qos normal
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>micromamba activate R-project
</span><span id="__span-13-10"><a href="#__codelineno-13-10" id="__codelineno-13-10" name="__codelineno-13-10"></a>
</span><span id="__span-13-11"><a href="#__codelineno-13-11" id="__codelineno-13-11" name="__codelineno-13-11"></a>echo "Launched at $(date)"
</span><span id="__span-13-12"><a href="#__codelineno-13-12" id="__codelineno-13-12" name="__codelineno-13-12"></a>echo "Job ID: ${SLURM_JOBID}"
</span><span id="__span-13-13"><a href="#__codelineno-13-13" id="__codelineno-13-13" name="__codelineno-13-13"></a>echo "Node list: ${SLURM_NODELIST}"
</span><span id="__span-13-14"><a href="#__codelineno-13-14" id="__codelineno-13-14" name="__codelineno-13-14"></a>echo "Submit dir.: ${SLURM_SUBMIT_DIR}"
</span><span id="__span-13-15"><a href="#__codelineno-13-15" id="__codelineno-13-15" name="__codelineno-13-15"></a>echo "Numb. of cores: ${SLURM_CPUS_PER_TASK}"
</span><span id="__span-13-16"><a href="#__codelineno-13-16" id="__codelineno-13-16" name="__codelineno-13-16"></a>
</span><span id="__span-13-17"><a href="#__codelineno-13-17" id="__codelineno-13-17" name="__codelineno-13-17"></a>export SRUN_CPUS_PER_TASK="${SLURM_CPUS_PER_TASK}"
</span><span id="__span-13-18"><a href="#__codelineno-13-18" id="__codelineno-13-18" name="__codelineno-13-18"></a>export OMP_NUM_THREADS=1
</span><span id="__span-13-19"><a href="#__codelineno-13-19" id="__codelineno-13-19" name="__codelineno-13-19"></a>srun Rscript --no-save --no-restore script.R
</span><span id="__span-13-20"><a href="#__codelineno-13-20" id="__codelineno-13-20" name="__codelineno-13-20"></a>
</span><span id="__span-13-21"><a href="#__codelineno-13-21" id="__codelineno-13-21" name="__codelineno-13-21"></a>micromamba deactivate
</span></code></pre></div></p> <p>Environment activations in Conda are stacked, and unlike modules, only one environment is active at a time with the rest being pushed down the stack. Consider the following script excerpt. <div class="language-text highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a># Initialization code
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a>micromabma activate python-project
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a># Code to run a simulation and generate output with Python
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>micromabma activate R-project
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a># Code to perform statistical analysis and ploting with R
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a>micromamba deactivate
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a>
</span><span id="__span-14-13"><a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a># Code to save data with Python
</span></code></pre></div></p> <p>These script creates the following environment stack.</p> <div class="language-text highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a>(base)
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a>|
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>| # No software is available here
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a>|
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a>+-(python-project) # micromabma activate python-project
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a>| |
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a>| | # Only Python is available here
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>| |
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a>| +-(R-project) # micromabma activate R-project
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a>| | |
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>| | | # Only R is available here
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>| | |
</span><span id="__span-15-13"><a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a>| +-+ # micromamba deactivate
</span><span id="__span-15-14"><a href="#__codelineno-15-14" id="__codelineno-15-14" name="__codelineno-15-14"></a>| |
</span><span id="__span-15-15"><a href="#__codelineno-15-15" id="__codelineno-15-15" name="__codelineno-15-15"></a>| | # Only Python is available here
</span><span id="__span-15-16"><a href="#__codelineno-15-16" id="__codelineno-15-16" name="__codelineno-15-16"></a>| |
</span></code></pre></div> <p>We can see that the Python environment (<code>python-project</code>) remains in the stack while the R environment (<code>R-project</code>) is active, and will be broght forth as soon as the R environment is deactivated.</p> <p><em>Useful scripting resources</em></p> <ul> <li><a href="https://hpc-docs.uni.lu/slurm/launchers/#serial-task-script-launcher">Formatting submission scripts for R (and other systems)</a></li> </ul> <h3 id="exporting-and-importing-environment-specifications">Exporting and importing environment specifications<a class="headerlink" href="#exporting-and-importing-environment-specifications" title="Permanent link">¶</a></h3> <p>An important feature of Conda is that it allows you to export and version control you environment specifications, and recreate the environment on demand.</p> <ul> <li>A description of the software installed in the Conda environment can be exported on demand to a text file.</li> <li>In turn, a specification file can be used to populate a new environment, in effect recreating the environment.</li> </ul> <p>The environment reproducibility is particularly important when you want to have reproducible results, like for instance in a scientific simulation. You can setup and test your application in your local machine, save the environment, and later load the environment in an HPC system, and be sure that the application will behave identically. Conda in the background will ensure that identical packages will be installed.</p> <p>In Micromaba, you can export the specifications of an environment using the command: <div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a>$<span class="w"> </span>micromaba<span class="w"> </span>env<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--name<span class="w"> </span>&lt;environment<span class="w"> </span>name&gt;
</span></code></pre></div> By default the command prints to the standard output, but you can redirect the output to a file: <div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a>$<span class="w"> </span>micromaba<span class="w"> </span>env<span class="w"> </span><span class="nb">export</span><span class="w"> </span>--name<span class="w"> </span>&lt;environment<span class="w"> </span>name&gt;<span class="w"> </span>&gt;<span class="w"> </span>&lt;environment<span class="w"> </span>name&gt;.yaml
</span></code></pre></div> To recreate an environment from a specification file, pass the file as argument to the create command with the <code>--file</code> flag: <div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a>$<span class="w"> </span>micromamba<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>&lt;environment<span class="w"> </span>name&gt;<span class="w"> </span>--file<span class="w"> </span>&lt;environment<span class="w"> </span>name&gt;.yaml
</span></code></pre></div> This workflow demonstrates the use of simple text files to store specifications, but Micormamba supports various specification file types. All specification files are text files and can be version controlled with a tool such as Git.</p> <p><em>Sources</em></p> <ul> <li><a href="https://mamba.readthedocs.io/en/latest/user_guide/micromamba.html#specification-files">Micromamba User Guide: Specification files</a></li> </ul> <h3 id="example-installing-jupyter-and-managing-the-dependencies-of-a-notebook-with-micromamba">Example: Installing Jupyter and managing the dependencies of a notebook with Micromamba<a class="headerlink" href="#example-installing-jupyter-and-managing-the-dependencies-of-a-notebook-with-micromamba" title="Permanent link">¶</a></h3> <p>In this example we will create an environment, install Jupyter, and install all the dependencies for our notebooks with Micromamba. Start by creating an environment: <div class="language-text highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a>micromamba env create --name jupyter
</span></code></pre></div> Next, install Jupyter in the environment. Have a look at the page for <a href="https://anaconda.org/conda-forge/jupyterlab"><code>jupyterlab</code></a> in the conda-forge channel. To install it in your environment call: <div class="language-text highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a>micromamba install --name jupyter conda-forge::jupyterlab
</span></code></pre></div> Now activate the environment, create a working directory for your notebooks, and launch Jypyter: <div class="language-text highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a>micromamba activate jupyter
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>mkdir ~/Documents/notebooks &amp;&amp; cd ~/Documents/notebooks
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>jupyter lab
</span></code></pre></div> If a webpage appears with the Jupyter lab, the installation worked succeeded!</p> <p>You may need some Python package in your Jupyter notebook. You can make packages available in your notebook by installing the appropriate package in the Conda environment. For instance, assume that you need <code>pandas</code> and <code>numpy</code>. Searching the conda-forge channel, we can find the package name and installation instruction. With the <code>jupyter</code> environment active, run the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a>micromamba install conda-forge::numpy conda-forge::pandas
</span></code></pre></div> You should now be able to import <code>numpy</code> and <code>pandas</code> in your notebook!</p> <p>After completing your work, close down the notebook with the command <code>C-c</code>, and deactivate the <code>jupyter</code> Conda environment: <div class="language-text highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a>micromamba deactive
</span></code></pre></div> You should now be in your normal operating system environment.</p> <h2 id="self-management-of-work-environments-in-ul-hpc-with-conda">Self management of work environments in UL HPC with Conda<a class="headerlink" href="#self-management-of-work-environments-in-ul-hpc-with-conda" title="Permanent link">¶</a></h2> <p>Conda is one of the systems for providing software in UL HPC systems, along with <a href="modules.md">modules</a> and <a href="../../containers/">containers</a>. When starting a new project it is important to select the appropriate system.</p> <p>Before installing any software yourself in user space you should contact the ULHPC High Level Support Team in the <a href="https://service.uni.lu/sp?id=index">service portal</a> [Home &gt; Research &gt; HPC &gt; Software environment &gt; Request expertise] to check if we can install the software in our system. A system wide installation will not consume any of your storage quota, and it will be configured and tested to provide optimal efficiency.</p> <h3 id="when-a-conda-environment-is-useful">When a Conda environment is useful<a class="headerlink" href="#when-a-conda-environment-is-useful" title="Permanent link">¶</a></h3> <p>There are three aspects of environment management that you should consider when selecting the method with which you will manage your software.</p> <ul> <li> <p><strong>Ease of use:</strong> Many software systems whose performance is not critical and are used by relatively few users are not provided though the standard distribution channels of modules or containers. In such cases the easiest installation option is a user side installation with Conda or some similar package management system.</p> </li> <li> <p><strong>Reproducibility:</strong> Conda and containers can both create reproducible environments, with descriptions of the environment exported and version controlled in text files. However, containers require significant amount of manual configuration to create a reproducible environment and to perform well in a wide range of systems. If your aim is an easily reproducible environment Conda is the superior choice.</p> </li> <li> <p><strong>Performance:</strong> Conda provides precompiled executables. Even thought multiple configurations are supported, you will not always find an executable tailored to your target system. Modules and containers provided by UL UPC are optimized to ensure performance and stability in our systems, so prefer them.</p> </li> </ul> <h3 id="storage-limitations-in-ul-hpc">Storage limitations in UL HPC<a class="headerlink" href="#storage-limitations-in-ul-hpc" title="Permanent link">¶</a></h3> <p>Regardless of installation method, <em>when you install software in user space you are using up your storage quota</em>. Conda environment managers download and store a sizable amount of data to provided packages to the various environments. Even though the package data are shared between the various environments, they still consume space in your or your project's account. There are <a href="../../filesystems/quotas/#current-usage">limits in the storage space and number of files</a> that are available to projects and users in the cluster. Since Conda packages are self managed, <em>you need to clean unused data yourself</em>.</p> <h3 id="cleaning-up-package-data">Cleaning up package data<a class="headerlink" href="#cleaning-up-package-data" title="Permanent link">¶</a></h3> <p>There are two main sources of unused data, compressed archives of packages that Conda stores in its cache when downloading a new package, and data of packages no longer used in any environment. All unused data in Micromoamba can be removed with the command <div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a>micromamba<span class="w"> </span>clean<span class="w"> </span>--all<span class="w"> </span>--yes
</span></code></pre></div> where the flag <code>--yes</code> suppresses an interactive dialogue with details about the operations performed. In general you can use the default options with <code>--yes</code>, unless you have manually edited any files in you package data directory (default location <code>~/micromamba</code>) and you would like to preserve your changes.</p> <p><strong>Updating environments to remove old package versions</strong></p> <p>As we create new environments, we often install the latest version of each package. However, if the environments are not updated regularly, we may end up with different versions of the same package across multiple environments. If we have the same version of a package installed in all environments, we can save space by removing unused older versions.</p> <p>To update a package across all environments, use the command <div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">for</span><span class="w"> </span>e<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>micromamba<span class="w"> </span>env<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'FNR&gt;2 {print $1}'</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>micromamba<span class="w"> </span>update<span class="w"> </span>--yes<span class="w"> </span>--name<span class="w"> </span><span class="nv">$e</span><span class="w"> </span>&lt;package<span class="w"> </span>name&gt;<span class="p">;</span><span class="w"> </span><span class="k">done</span>
</span></code></pre></div> and to update all packages across all environments <div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a href="#__codelineno-26-1" id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">for</span><span class="w"> </span>e<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">$(</span>micromamba<span class="w"> </span>env<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">'FNR&gt;2 {print $1}'</span><span class="k">)</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>micromamba<span class="w"> </span>update<span class="w"> </span>--yes<span class="w"> </span>--name<span class="w"> </span><span class="nv">$e</span><span class="w"> </span>--all<span class="p">;</span><span class="w"> </span><span class="k">done</span>
</span></code></pre></div> where <code>FNR&gt;2</code> removes the headers in the output of <code>micromamba env list</code>, and is thus sensitive to changes in the user interface of Micromamba.</p> <p>After updating packages, the <code>clean</code> command can be called to removed the data of unused older package versions.</p> <p><em>Sources</em></p> <ul> <li><a href="https://docs.conda.io/projects/conda/en/latest/commands/clean.html">Oficial Conda <code>clean</code> documentation</a></li> <li><a href="https://stackoverflow.com/questions/51960539/where-does-conda-clean-remove-packages-from">Understanding Conda <code>clean</code></a></li> </ul> <h3 id="a-note-about-internal-workings-of-conda">A note about internal workings of Conda<a class="headerlink" href="#a-note-about-internal-workings-of-conda" title="Permanent link">¶</a></h3> <p>In general, Conda packages are stored in a central directory, and hard links are created in the library directories of any environment that requires the package. Since hard links do not consume space and inodes, Conda is very efficient in its usage of storage space.</p> <p>Consider for instance the MPFR package used in some environment <code>gaussian_regression</code>. Looking into the Conda installation managed by Micromamba, these are the installed library files: <div class="language-text highlight"><pre><span></span><code><span id="__span-27-1"><a href="#__codelineno-27-1" id="__codelineno-27-1" name="__codelineno-27-1"></a>gkaf@ulhpc-laptop:~/micromamba$ ls -lahFi pkgs/mpfr-4.2.1-h9458935_0/lib/
</span><span id="__span-27-2"><a href="#__codelineno-27-2" id="__codelineno-27-2" name="__codelineno-27-2"></a>total 1.3M
</span><span id="__span-27-3"><a href="#__codelineno-27-3" id="__codelineno-27-3" name="__codelineno-27-3"></a>5286432 drwxr-xr-x 1 gkaf gkaf   94 Oct 25 13:59 ./
</span><span id="__span-27-4"><a href="#__codelineno-27-4" id="__codelineno-27-4" name="__codelineno-27-4"></a>5286426 drwxr-xr-x 1 gkaf gkaf   38 Oct 25 13:59 ../
</span><span id="__span-27-5"><a href="#__codelineno-27-5" id="__codelineno-27-5" name="__codelineno-27-5"></a>5286436 lrwxrwxrwx 1 gkaf gkaf   16 Oct 22 21:47 libmpfr.so -&gt; libmpfr.so.6.2.1*
</span><span id="__span-27-6"><a href="#__codelineno-27-6" id="__codelineno-27-6" name="__codelineno-27-6"></a>5286441 lrwxrwxrwx 1 gkaf gkaf   16 Oct 22 21:47 libmpfr.so.6 -&gt; libmpfr.so.6.2.1*
</span><span id="__span-27-7"><a href="#__codelineno-27-7" id="__codelineno-27-7" name="__codelineno-27-7"></a>5286433 -rwxrwxr-x 7 gkaf gkaf 1.3M Oct 22 21:47 libmpfr.so.6.2.1*
</span><span id="__span-27-8"><a href="#__codelineno-27-8" id="__codelineno-27-8" name="__codelineno-27-8"></a>5286442 drwxr-xr-x 1 gkaf gkaf   14 Oct 25 13:59 pkgconfig/
</span></code></pre></div> Looking into the libraries of the <code>gaussian_regression</code> environment, there is a hard link to the MPFR library: <div class="language-text highlight"><pre><span></span><code><span id="__span-28-1"><a href="#__codelineno-28-1" id="__codelineno-28-1" name="__codelineno-28-1"></a>gkaf@ulhpc-laptop:~/micromamba$ ls -lahFi envs/gaussian_regression/lib/libmpfr.so.6.2.1 
</span><span id="__span-28-2"><a href="#__codelineno-28-2" id="__codelineno-28-2" name="__codelineno-28-2"></a>5286433 -rwxrwxr-x 7 gkaf gkaf 1.3M Oct 22 21:47 envs/gaussian_regression/lib/libmpfr.so.6.2.1*
</span></code></pre></div> You can use the <code>-i</code> flag in <code>ls</code> to print the inode number of a file. Hard links have the same inode number, meaning that they are essentially the same file.</p> <p>Conda will not automatically check if the files in the <code>pkgs</code> directories must be removed. For instance, when you uninstall a package from an environment, when you delete an environment, or when a package is updated in an environment, only the hard link in the environment directory will change. The files in <code>pkgs</code> will remain even if they are no longer used in any environment. The relevant <code>clean</code> routines check which packages are actually used and remove the unused files.</p> <hr/> <h2 id="environment-management-best-practices">Environment management best practices<a class="headerlink" href="#environment-management-best-practices" title="Permanent link">¶</a></h2> <p>Environment management systems are diverse but support a simple common set of features, which are:</p> <ul> <li>the ability to create and reproduce software environments,</li> <li>isolation between environments and between each environment and the system, and</li> <li>easy access to multiple sources of software packages.</li> </ul> <p>The environment of a software system can be categorized in 2 components,</p> <ul> <li>the <em>system</em> comprising of installed software components and environment settings, and</li> <li>the <em>packages</em> added to various software components of the environment.</li> </ul> <p>The system is a superset of the packages in the environment, however, it makes sense to consider them separately as many software distributions provide native managers for the packages they ship.</p> <p><a href="../images/environment_management.png"><img alt="" src="../images/environment_management.png"/></a></p> <p><em>Environment management</em> systems usually focus on the management of the system, installing software, setting environment variables and so on. <em>Package management</em> systems on the other hand usually focus on managing the packages installed for some specific software component. The distinction albeit useful is not always clear, and usually environment managers that can also manage the packages of some software systems.</p> <p>Furthermore, both <em>environment</em> and <em>package</em> management systems can be further subdivided according to the extend of the target environment. The management systems can target</p> <ul> <li>the whole system (<em>system environment management tools</em>), or</li> <li>the environment within a single project directory (<em>project environment management tools</em>).</li> </ul> <p>All <em>project environment management tools</em> and most <em>system environment management tools</em> provide methods to</p> <ul> <li>store the environment setup in a text file that can be version controlled, and</li> <li>to recreate the environment from the description in the text file.</li> </ul> <p>The <em>project environment management tools</em> in particular often automate the function of updating the text file describing the environment in order to automatically initialize the environment when initializing a new instance of the project. Thus project environments are very useful in storing a distributing research projects, since they automate the reproducibility of the project setup.</p> <p>The overarching theory for environment management tools such as Conda is simple. However, there are implementation details which affect how environment management tools are used. In the following section we present some case studies about practical issues you may encounter with few environment management tools. </p> <h3 id="using-pip-for-python-package-management">Using <code>pip</code> for Python package management<a class="headerlink" href="#using-pip-for-python-package-management" title="Permanent link">¶</a></h3> <p>The official package installer for Python is <a href="https://pypi.org/project/pip/"><code>pip</code></a>. You can use pip to install packages from the Python Package Index (PyPI) and other indexes. With <code>pip</code> you can install packages in 3 modes,</p> <ul> <li>system-wide installation, where a package is available to all users,</li> <li>user-wide installation, where a package are installed in a special directory in the user home directory and are available to the user only, and</li> <li>environment installation where a package is only available inside the environment where it was installed.</li> </ul> <p>Python is now part of many Linux distributions, such as <a href="https://wiki.debian.org/Python">Debian</a>. This means now that users cannot (or should not) install packages system-wide using <code>pip</code>. User-wide and <code>venv</code> environment installations are still possible though.</p> <p>To install a package user-wide use the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-29-1"><a href="#__codelineno-29-1" id="__codelineno-29-1" name="__codelineno-29-1"></a>$ pip install --user &lt;package_name&gt;
</span></code></pre></div> User-wide installations install packages in a directory located at the home directory of the user. Python searches for packages in the user installation path first. This packages are meant to be installed with the system Python and run without root privileges. Thus user-wide installation is appropriate for packages that extend the system functionality for a single user.</p> <p><em>User-wide installation is not recommended for all but the system Python environment. User-wide installations rely on system packages, so if you install any package using a Conda environment the package will depend on the Conda environment. Thus, packages installed user-wide with a Conda environment will may be incompatible with the system environment or with any other Conda environment.</em></p> <h4 id="python-venv-virtual-environments">Python <code>venv</code> virtual environments<a class="headerlink" href="#python-venv-virtual-environments" title="Permanent link">¶</a></h4> <p>For most applications, functionality should be installed in a virtual environment. To use a <code>venv</code> environment, first initialize the environment in some directory. The official distribution of Python comes packaged with the <code>venv</code> module that can create a virtual environment with the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-30-1"><a href="#__codelineno-30-1" id="__codelineno-30-1" name="__codelineno-30-1"></a>$ python -m venv &lt;path_to_directory&gt;
</span></code></pre></div> You activate the environment with <div class="language-text highlight"><pre><span></span><code><span id="__span-31-1"><a href="#__codelineno-31-1" id="__codelineno-31-1" name="__codelineno-31-1"></a>$ source &lt;path_to_directory&gt;/bin/activate
</span></code></pre></div> and deactivate with: <div class="language-text highlight"><pre><span></span><code><span id="__span-32-1"><a href="#__codelineno-32-1" id="__codelineno-32-1" name="__codelineno-32-1"></a>$ deactivate
</span></code></pre></div> When the environment is active, you can install packages with the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-33-1"><a href="#__codelineno-33-1" id="__codelineno-33-1" name="__codelineno-33-1"></a>$ pip install &lt;package_name&gt;
</span></code></pre></div> This is the same command installing packages system-wide, but because the environment is active the package is installed in the environment directory.</p> <p>The <code>pip</code> package manager also provides the functionality required to export environment setups in text files and recreate environments from a text file description of the environment setup. To export the environment, activate the environment and use the <code>freeze</code> command: <div class="language-text highlight"><pre><span></span><code><span id="__span-34-1"><a href="#__codelineno-34-1" id="__codelineno-34-1" name="__codelineno-34-1"></a>$ source &lt;path_to_directory&gt;/bin/activate
</span><span id="__span-34-2"><a href="#__codelineno-34-2" id="__codelineno-34-2" name="__codelineno-34-2"></a>(&lt;environment name&gt;) $ pip freeze &gt; &lt;environment name&gt;.yml
</span></code></pre></div> To recreate the environment, create an empty environment, <div class="language-text highlight"><pre><span></span><code><span id="__span-35-1"><a href="#__codelineno-35-1" id="__codelineno-35-1" name="__codelineno-35-1"></a>python -m venv ~/environments/&lt;environment name&gt;
</span></code></pre></div> activate the environment, <div class="language-text highlight"><pre><span></span><code><span id="__span-36-1"><a href="#__codelineno-36-1" id="__codelineno-36-1" name="__codelineno-36-1"></a>source ~/environments/&lt;environment name&gt;/bin/activate
</span></code></pre></div> and install all the required packages from the requirement file: <div class="language-text highlight"><pre><span></span><code><span id="__span-37-1"><a href="#__codelineno-37-1" id="__codelineno-37-1" name="__codelineno-37-1"></a>(&lt;environment name&gt;) $ pip install --requirement /path/to/&lt;environment name&gt;.yml
</span></code></pre></div></p> <p>When managing an environment, it is often required to upgrade a package to access new functionality or fix a bug. To upgrade a package with <code>pip</code>, simply install/reinstall the package with the <code>--upgrade</code> flag: <div class="language-text highlight"><pre><span></span><code><span id="__span-38-1"><a href="#__codelineno-38-1" id="__codelineno-38-1" name="__codelineno-38-1"></a>(&lt;environment name&gt;) $ pip install --upgrade &lt;package name&gt;
</span></code></pre></div> Note that in Python environments managed with <code>pip</code>, you have to update each package individually. Package management can thus be quote laborious, but there are some methods to speed up the process.</p> <p>Finally, to delete a virtual environment installation simply deactivate the environment and remove its directory. Thus, assuming that an environment was installed in <code>~/environments/&lt;environment name&gt;</code>, remove it with: <div class="language-text highlight"><pre><span></span><code><span id="__span-39-1"><a href="#__codelineno-39-1" id="__codelineno-39-1" name="__codelineno-39-1"></a>$ rm -r ~/environments/&lt;environment name&gt;
</span></code></pre></div></p> <p>With all the features that <code>pip</code> provides, it is a very attractive method for creating and managing environments. However, is often necessary even when you are managing your environments with <code>pip</code>!</p> <h4 id="creating-a-venv-environment-with-python-installed-in-a-conda-environment">Creating a <code>venv</code> environment with Python installed in a Conda environment<a class="headerlink" href="#creating-a-venv-environment-with-python-installed-in-a-conda-environment" title="Permanent link">¶</a></h4> <p>In most distributions <code>venv</code> comes packages together with python, however, in some distributions <code>venv</code> is provided as an independent package. In Debian for instance, the system Python package, <code>python3</code>, does not contain the <code>venv</code> module. The module is distributed through the <code>python3-venv</code> package. You may want to avoid using the system package for a variety of reasons:</p> <ul> <li>The PyPI package you want to install may require a version of Python that is not provided by your system.</li> <li>You may be in a constrained system where installing a package such as <code>python3-venv</code> is not possible, either because you don't have the rights, or because you are working with some high performance computer where installing a package required installing the package in hundreds of machines.</li> <li>You may not want to pollute your system installation. In accordance to the UNIX philosophy use the system ensures that your machine operates correctly, and use the Conda to run the latest application!</li> </ul> <p>The trick is to install a version of Python in a Conda environment, and use the Python installed in the Conda environment to create <code>venv</code> environments. Start by creating a python environment with the required version for python. For instance: <div class="language-text highlight"><pre><span></span><code><span id="__span-40-1"><a href="#__codelineno-40-1" id="__codelineno-40-1" name="__codelineno-40-1"></a>$ micromamba env create --name &lt;environment name&gt;-python
</span><span id="__span-40-2"><a href="#__codelineno-40-2" id="__codelineno-40-2" name="__codelineno-40-2"></a>$ micromamba install --name &lt;environment name&gt;-python conda-forge::python
</span></code></pre></div> The Python distribution from conda-forge comes with <code>venv</code> installed. Use <code>venv</code> to create your virtual environment: <div class="language-text highlight"><pre><span></span><code><span id="__span-41-1"><a href="#__codelineno-41-1" id="__codelineno-41-1" name="__codelineno-41-1"></a>$ micromamba run --name &lt;environment name&gt;-python python -m venv ~/environments/&lt;environment name&gt;
</span></code></pre></div> It is a good idea to use some standard location to install global environments; a good choice is some directory in your home directory such as: <div class="language-text highlight"><pre><span></span><code><span id="__span-42-1"><a href="#__codelineno-42-1" id="__codelineno-42-1" name="__codelineno-42-1"></a>~/environments
</span></code></pre></div> Now an environment has been installed with the required version of python.</p> <p>Any other tool requires the activation of the Conda environment before you are able to activate an environment created by an internal tool, such as <code>venv</code>. In fact, you can activate your <code>venv</code> as follows: <div class="language-text highlight"><pre><span></span><code><span id="__span-43-1"><a href="#__codelineno-43-1" id="__codelineno-43-1" name="__codelineno-43-1"></a>$ micromaba activate &lt;environment name&gt;-python
</span><span id="__span-43-2"><a href="#__codelineno-43-2" id="__codelineno-43-2" name="__codelineno-43-2"></a>(&lt;environment name&gt;-python) $ source ~/environments/&lt;environment name&gt;/bin/activate
</span><span id="__span-43-3"><a href="#__codelineno-43-3" id="__codelineno-43-3" name="__codelineno-43-3"></a>(&lt;environment name&gt;) (&lt;environment name&gt;-python) $
</span></code></pre></div> However, activating the Conda environment is redundant with a <code>venv</code> environment. Yow you can activate the environment simply with: <div class="language-text highlight"><pre><span></span><code><span id="__span-44-1"><a href="#__codelineno-44-1" id="__codelineno-44-1" name="__codelineno-44-1"></a>source ~/environments/&lt;environment name&gt;/bin/active
</span><span id="__span-44-2"><a href="#__codelineno-44-2" id="__codelineno-44-2" name="__codelineno-44-2"></a>(&lt;environment name&gt;) $
</span></code></pre></div></p> <p>After creating a <code>venv</code> environment you no longer need to interact with the Conda environment, <code>&lt;environment name&gt;-python</code>, except for updating Python itself. This is because <code>pip</code> environments are completely isolated from the system, except for the Python executable. If you browse the environment definition file, <div class="language-text highlight"><pre><span></span><code><span id="__span-45-1"><a href="#__codelineno-45-1" id="__codelineno-45-1" name="__codelineno-45-1"></a>$ cat ~/environments/&lt;environment name&gt;/pyvenv.cfg
</span><span id="__span-45-2"><a href="#__codelineno-45-2" id="__codelineno-45-2" name="__codelineno-45-2"></a>home = /home/gkaf/micromamba/envs/&lt;environment name&gt;-python/bin
</span><span id="__span-45-3"><a href="#__codelineno-45-3" id="__codelineno-45-3" name="__codelineno-45-3"></a>include-system-site-packages = false
</span><span id="__span-45-4"><a href="#__codelineno-45-4" id="__codelineno-45-4" name="__codelineno-45-4"></a>version = 3.8.18
</span></code></pre></div> you can see that system package usage is disabled by default, with the option <code>include-system-site-packages = false</code>. Also, note that the binary directory of the Conda environment that provides the Python executable is noted in the <code>home</code> entry. This is important, as the only package that <code>pip</code> cannot install is python itself. The python executable is selected the environment is created with the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-46-1"><a href="#__codelineno-46-1" id="__codelineno-46-1" name="__codelineno-46-1"></a>$ python -m venv ~/environments/&lt;environment name&gt;
</span></code></pre></div> In fact, listing the contents of <code>~/environments/&lt;environment name&gt;/bin</code>, there are the symbolic links <div class="language-text highlight"><pre><span></span><code><span id="__span-47-1"><a href="#__codelineno-47-1" id="__codelineno-47-1" name="__codelineno-47-1"></a>python -&gt; /home/gkaf/micromamba/envs/&lt;environmen name&gt;-python/bin/python
</span><span id="__span-47-2"><a href="#__codelineno-47-2" id="__codelineno-47-2" name="__codelineno-47-2"></a>python3 -&gt; python
</span></code></pre></div> that point to the Python installed in our Conda environment. Every other executable and library package installed in our environment, is installed locally, and as the options <code>include-system-site-packages = false</code> suggests, it will shadow any other package in the Conda environment.</p> <h4 id="example-installing-jupyter-and-managing-the-dependencies-of-a-notebook-with-pip">Example: Installing Jupyter and managing the dependencies of a notebook with <code>pip</code><a class="headerlink" href="#example-installing-jupyter-and-managing-the-dependencies-of-a-notebook-with-pip" title="Permanent link">¶</a></h4> <p>In this example we create an environment, install Jupyter, and install all the dependencies for our notebooks with <code>pip</code>. Start by creating a Conda environment for the Python used in the <code>venv</code> environment: <div class="language-text highlight"><pre><span></span><code><span id="__span-48-1"><a href="#__codelineno-48-1" id="__codelineno-48-1" name="__codelineno-48-1"></a>micromamba env create --name jupyter-python
</span></code></pre></div> Next, install Python in the environment. Have a look at the page for <a href="https://anaconda.org/conda-forge/python">Python</a> in the conda-forge channel. To install it in your environment call: <div class="language-text highlight"><pre><span></span><code><span id="__span-49-1"><a href="#__codelineno-49-1" id="__codelineno-49-1" name="__codelineno-49-1"></a>micromamba install --name jupyter-python conda-forge::python
</span></code></pre></div> Now use the python of the <code>jupyter-python</code> environment to create your <code>venv</code> environment. We use the <code>run</code> command of Conda to execute a single shot command: <div class="language-text highlight"><pre><span></span><code><span id="__span-50-1"><a href="#__codelineno-50-1" id="__codelineno-50-1" name="__codelineno-50-1"></a>micromamba run --name jupyter-python python -m venv ~/environments/jupyter
</span></code></pre></div> We are now ready to activate our <code>venv</code> environment and install our main dependencies: <div class="language-text highlight"><pre><span></span><code><span id="__span-51-1"><a href="#__codelineno-51-1" id="__codelineno-51-1" name="__codelineno-51-1"></a>$ source ~/environments/jupyter/bin/activate
</span><span id="__span-51-2"><a href="#__codelineno-51-2" id="__codelineno-51-2" name="__codelineno-51-2"></a>(jupyter) $ pip install jupyterlab
</span></code></pre></div> Now create a working directory for your notebooks, and launch Jupyter: <div class="language-text highlight"><pre><span></span><code><span id="__span-52-1"><a href="#__codelineno-52-1" id="__codelineno-52-1" name="__codelineno-52-1"></a>(jupyter) $ mkdir ~/Documents/notebooks &amp;&amp; cd ~/Documents/notebooks
</span><span id="__span-52-2"><a href="#__codelineno-52-2" id="__codelineno-52-2" name="__codelineno-52-2"></a>(jupyter) $ jupyter lab
</span></code></pre></div> If a webpage appears with the Jupyter lab, the installation worked succeeded!</p> <p>You may need some Python package in your Jupyter notebook. You can install new packages at your <code>venv</code> environment. For instance, assume that you need <code>pandas</code> and <code>numpy</code>. Activate the environment, and install the dependencies with the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-53-1"><a href="#__codelineno-53-1" id="__codelineno-53-1" name="__codelineno-53-1"></a>(jupyter) $ pip install numpy pandas
</span></code></pre></div> You should now be able to import <code>numpy</code> and <code>pandas</code> in your notebook!</p> <p>After completing your work, close down the notebook with the command <code>C-c</code>, and deactivate the <code>jupyter</code> environment: <div class="language-text highlight"><pre><span></span><code><span id="__span-54-1"><a href="#__codelineno-54-1" id="__codelineno-54-1" name="__codelineno-54-1"></a>(jupyter) $ deactivate
</span></code></pre></div> You should now be in your normal operating system environment.</p> <h3 id="combining-conda-with-other-package-management-tools">Combining Conda with other package management tools<a class="headerlink" href="#combining-conda-with-other-package-management-tools" title="Permanent link">¶</a></h3> <p>In some cases Conda is used to manage the environment and other tools are used to install pacakges. There are a few reasons why you may want to manage packages with different tools.</p> <ul> <li> <p>You may want to use a project environment management tool. For instance, you may install Python with Conda and use project environments managed with <a href="https://virtualenv.pypa.io/en/latest/">Virtualenv</a>, <a href="https://pipenv.pypa.io/en/latest">Pipenv</a> and <a href="https://python-poetry.org/">Poetry</a>. In the case of R you may install R with Conda and manage project environments with <a href="https://rstudio.github.io/packrat/">Packrat</a>. </p> </li> <li> <p>In some cases packages are not available through Conda, but they may be available through other source code or binary distributions. A typical example is Julia where packages are only available trough the <a href="https://pkgdocs.julialang.org/v1/">Pkg</a> package manager. Similarly, many less popular packages are available through PyPI and can be installed with <code>pip</code>, but they are not available through a Conda channel.</p> </li> </ul> <p>A list of case studies follows. In these case studies you can find how Conda and other package managers can be combined to install software.</p> <h4 id="installing-packages-with-pip-in-a-conda-environment">Installing packages with <code>pip</code> in a Conda environment<a class="headerlink" href="#installing-packages-with-pip-in-a-conda-environment" title="Permanent link">¶</a></h4> <p>In this example Conda and <code>pip</code> are used to create an environment for working with with <a href="https://www.mkdocs.org/">MkDocs</a>. We assume that we want to work with a custom python distribution installed in a Conda environment and we want to install 2 packages,</p> <ul> <li><code>mkdocs</code>, and</li> <li><code>mkdocs-minify-plugin</code>.</li> </ul> <p>While <code>mkdocs</code> is available though the conda-forge Conda channel, at the time of witting <code>mkdocs-minify-plugin</code> is only available through PyPI. At this point we have 3 options,</p> <ul> <li>install <code>mkdocs</code> and <code>mkdocs-minify-plugin</code> in a <code>venv</code> environment,</li> <li>install <code>mkdocs</code> and <code>mkdocs-minify-plugin</code> in the Conda environment from PyPI with <code>pip</code>, or</li> <li>install <code>mkdocs</code> in a Conda and <code>mkdocs-minify-plugin</code> with <code>pip</code>, by installing <code>mkdocs-minify-plugin</code> either<ul> <li>directly in the Conda environment, or</li> <li>in a <code>venv</code> environment end enabling <code>venv</code> to include system packages to access <code>mkdocs</code>.</li> </ul> </li> </ul> <p>To begin with, create the base Conda environment which will provide the Python executable and related tools such as <code>pip</code> and <code>venv</code>. <div class="language-bash highlight"><pre><span></span><code><span id="__span-55-1"><a href="#__codelineno-55-1" id="__codelineno-55-1" name="__codelineno-55-1"></a>micromamba<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>mkdocs-python
</span></code></pre></div> Exporting the environment, <div class="language-text highlight"><pre><span></span><code><span id="__span-56-1"><a href="#__codelineno-56-1" id="__codelineno-56-1" name="__codelineno-56-1"></a>$ micromamba env export --name mkdocs-python
</span><span id="__span-56-2"><a href="#__codelineno-56-2" id="__codelineno-56-2" name="__codelineno-56-2"></a>name: mkdocs-python
</span><span id="__span-56-3"><a href="#__codelineno-56-3" id="__codelineno-56-3" name="__codelineno-56-3"></a>channels:
</span><span id="__span-56-4"><a href="#__codelineno-56-4" id="__codelineno-56-4" name="__codelineno-56-4"></a>dependencies:
</span></code></pre></div> we can see that the environment is empty. Start by installing Python: <div class="language-bash highlight"><pre><span></span><code><span id="__span-57-1"><a href="#__codelineno-57-1" id="__codelineno-57-1" name="__codelineno-57-1"></a>micromamba<span class="w"> </span>install<span class="w"> </span>--name<span class="w"> </span>mkdocs-python<span class="w"> </span>conda-forge::python
</span></code></pre></div> Exporting the environment specifications, <div class="language-text highlight"><pre><span></span><code><span id="__span-58-1"><a href="#__codelineno-58-1" id="__codelineno-58-1" name="__codelineno-58-1"></a>$ micromamba env export --name mkdocs-python
</span><span id="__span-58-2"><a href="#__codelineno-58-2" id="__codelineno-58-2" name="__codelineno-58-2"></a>name: mkdocs-python
</span><span id="__span-58-3"><a href="#__codelineno-58-3" id="__codelineno-58-3" name="__codelineno-58-3"></a>channels:
</span><span id="__span-58-4"><a href="#__codelineno-58-4" id="__codelineno-58-4" name="__codelineno-58-4"></a>- conda-forge
</span><span id="__span-58-5"><a href="#__codelineno-58-5" id="__codelineno-58-5" name="__codelineno-58-5"></a>dependencies:
</span><span id="__span-58-6"><a href="#__codelineno-58-6" id="__codelineno-58-6" name="__codelineno-58-6"></a>- _libgcc_mutex=0.1=conda_forge
</span><span id="__span-58-7"><a href="#__codelineno-58-7" id="__codelineno-58-7" name="__codelineno-58-7"></a>- _openmp_mutex=4.5=2_gnu
</span><span id="__span-58-8"><a href="#__codelineno-58-8" id="__codelineno-58-8" name="__codelineno-58-8"></a>- bzip2=1.0.8=hd590300_5
</span><span id="__span-58-9"><a href="#__codelineno-58-9" id="__codelineno-58-9" name="__codelineno-58-9"></a>- ca-certificates=2024.2.2=hbcca054_0
</span><span id="__span-58-10"><a href="#__codelineno-58-10" id="__codelineno-58-10" name="__codelineno-58-10"></a>- ld_impl_linux-64=2.40=h41732ed_0
</span><span id="__span-58-11"><a href="#__codelineno-58-11" id="__codelineno-58-11" name="__codelineno-58-11"></a>- libexpat=2.6.2=h59595ed_0
</span><span id="__span-58-12"><a href="#__codelineno-58-12" id="__codelineno-58-12" name="__codelineno-58-12"></a>- libffi=3.4.2=h7f98852_5
</span><span id="__span-58-13"><a href="#__codelineno-58-13" id="__codelineno-58-13" name="__codelineno-58-13"></a>- libgcc-ng=13.2.0=h807b86a_5
</span><span id="__span-58-14"><a href="#__codelineno-58-14" id="__codelineno-58-14" name="__codelineno-58-14"></a>- libgomp=13.2.0=h807b86a_5
</span><span id="__span-58-15"><a href="#__codelineno-58-15" id="__codelineno-58-15" name="__codelineno-58-15"></a>- libnsl=2.0.1=hd590300_0
</span><span id="__span-58-16"><a href="#__codelineno-58-16" id="__codelineno-58-16" name="__codelineno-58-16"></a>- libsqlite=3.45.2=h2797004_0
</span><span id="__span-58-17"><a href="#__codelineno-58-17" id="__codelineno-58-17" name="__codelineno-58-17"></a>- libuuid=2.38.1=h0b41bf4_0
</span><span id="__span-58-18"><a href="#__codelineno-58-18" id="__codelineno-58-18" name="__codelineno-58-18"></a>- libxcrypt=4.4.36=hd590300_1
</span><span id="__span-58-19"><a href="#__codelineno-58-19" id="__codelineno-58-19" name="__codelineno-58-19"></a>- libzlib=1.2.13=hd590300_5
</span><span id="__span-58-20"><a href="#__codelineno-58-20" id="__codelineno-58-20" name="__codelineno-58-20"></a>- ncurses=6.4.20240210=h59595ed_0
</span><span id="__span-58-21"><a href="#__codelineno-58-21" id="__codelineno-58-21" name="__codelineno-58-21"></a>- openssl=3.2.1=hd590300_1
</span><span id="__span-58-22"><a href="#__codelineno-58-22" id="__codelineno-58-22" name="__codelineno-58-22"></a>- pip=24.0=pyhd8ed1ab_0
</span><span id="__span-58-23"><a href="#__codelineno-58-23" id="__codelineno-58-23" name="__codelineno-58-23"></a>- python=3.12.2=hab00c5b_0_cpython
</span><span id="__span-58-24"><a href="#__codelineno-58-24" id="__codelineno-58-24" name="__codelineno-58-24"></a>- readline=8.2=h8228510_1
</span><span id="__span-58-25"><a href="#__codelineno-58-25" id="__codelineno-58-25" name="__codelineno-58-25"></a>- setuptools=69.2.0=pyhd8ed1ab_0
</span><span id="__span-58-26"><a href="#__codelineno-58-26" id="__codelineno-58-26" name="__codelineno-58-26"></a>- tk=8.6.13=noxft_h4845f30_101
</span><span id="__span-58-27"><a href="#__codelineno-58-27" id="__codelineno-58-27" name="__codelineno-58-27"></a>- tzdata=2024a=h0c530f3_0
</span><span id="__span-58-28"><a href="#__codelineno-58-28" id="__codelineno-58-28" name="__codelineno-58-28"></a>- wheel=0.43.0=pyhd8ed1ab_0
</span><span id="__span-58-29"><a href="#__codelineno-58-29" id="__codelineno-58-29" name="__codelineno-58-29"></a>- xz=5.2.6=h166bdaf_0
</span></code></pre></div> we can see that some version of <code>pip</code> (<code>pip=24.0=pyhd8ed1ab_0</code>) is installed, along with other packages.</p> <p><em>In all cases we will use <code>pip</code>, the PyPI package manager, that comes packages with Python. Make sure that in each case you start with an empty environment with only Python installed.</em></p> <h5 id="installing-all-dependencies-on-a-venv-environment">Installing all dependencies on a <code>venv</code> environment<a class="headerlink" href="#installing-all-dependencies-on-a-venv-environment" title="Permanent link">¶</a></h5> <p>The simplest option is to install all the required packages in a <code>venv</code> virtual environment. Start by creating an environment with the <code>venv</code> module of the Python installed in the <code>mkdocs-python</code> environment: <div class="language-bash highlight"><pre><span></span><code><span id="__span-59-1"><a href="#__codelineno-59-1" id="__codelineno-59-1" name="__codelineno-59-1"></a>micromamba<span class="w"> </span>run<span class="w"> </span>--name<span class="w"> </span>mkdocs-python<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>~/environments/mkdocs
</span></code></pre></div> Activate the environment, <div class="language-text highlight"><pre><span></span><code><span id="__span-60-1"><a href="#__codelineno-60-1" id="__codelineno-60-1" name="__codelineno-60-1"></a>$ source ~/environment/mkdocs/bin/active
</span></code></pre></div> and export the environment specification, <div class="language-text highlight"><pre><span></span><code><span id="__span-61-1"><a href="#__codelineno-61-1" id="__codelineno-61-1" name="__codelineno-61-1"></a>(mkdocs) $ pip freeze
</span></code></pre></div> which should result in no output since we have not installed ant packages yet. Some infrastructure packages are installed in the environment by default, all installed packages can be printed with the command <code>pip list</code>, <div class="language-text highlight"><pre><span></span><code><span id="__span-62-1"><a href="#__codelineno-62-1" id="__codelineno-62-1" name="__codelineno-62-1"></a>(mkdocs) $ pip list --format=freeze
</span><span id="__span-62-2"><a href="#__codelineno-62-2" id="__codelineno-62-2" name="__codelineno-62-2"></a>pip==24.0
</span></code></pre></div> where the <code>--format</code> option selected ensures that the output if produced in a YAML file format. We can see that in the environment there is the <code>pip</code> package installed. Infrastructure packages are not version tracked as they are required only for <code>pip</code>, and not for packages provided by the environment.</p> <p>With the <code>venv</code> environment active, install the packages: <div class="language-text highlight"><pre><span></span><code><span id="__span-63-1"><a href="#__codelineno-63-1" id="__codelineno-63-1" name="__codelineno-63-1"></a>(mkdocs) $ pip install --upgrade mkdocs mkdocs-minify-plugin
</span></code></pre></div> Now the <code>pip freeze</code> command should print all the installed packages: <div class="language-text highlight"><pre><span></span><code><span id="__span-64-1"><a href="#__codelineno-64-1" id="__codelineno-64-1" name="__codelineno-64-1"></a>(mkdocs) $ pip freeze
</span><span id="__span-64-2"><a href="#__codelineno-64-2" id="__codelineno-64-2" name="__codelineno-64-2"></a>click==8.1.7
</span><span id="__span-64-3"><a href="#__codelineno-64-3" id="__codelineno-64-3" name="__codelineno-64-3"></a>csscompressor==0.9.5
</span><span id="__span-64-4"><a href="#__codelineno-64-4" id="__codelineno-64-4" name="__codelineno-64-4"></a>ghp-import==2.1.0
</span><span id="__span-64-5"><a href="#__codelineno-64-5" id="__codelineno-64-5" name="__codelineno-64-5"></a>htmlmin2==0.1.13
</span><span id="__span-64-6"><a href="#__codelineno-64-6" id="__codelineno-64-6" name="__codelineno-64-6"></a>Jinja2==3.1.3
</span><span id="__span-64-7"><a href="#__codelineno-64-7" id="__codelineno-64-7" name="__codelineno-64-7"></a>jsmin==3.0.1
</span><span id="__span-64-8"><a href="#__codelineno-64-8" id="__codelineno-64-8" name="__codelineno-64-8"></a>Markdown==3.6
</span><span id="__span-64-9"><a href="#__codelineno-64-9" id="__codelineno-64-9" name="__codelineno-64-9"></a>MarkupSafe==2.1.5
</span><span id="__span-64-10"><a href="#__codelineno-64-10" id="__codelineno-64-10" name="__codelineno-64-10"></a>mergedeep==1.3.4
</span><span id="__span-64-11"><a href="#__codelineno-64-11" id="__codelineno-64-11" name="__codelineno-64-11"></a>mkdocs==1.5.3
</span><span id="__span-64-12"><a href="#__codelineno-64-12" id="__codelineno-64-12" name="__codelineno-64-12"></a>mkdocs-minify-plugin==0.8.0
</span><span id="__span-64-13"><a href="#__codelineno-64-13" id="__codelineno-64-13" name="__codelineno-64-13"></a>packaging==24.0
</span><span id="__span-64-14"><a href="#__codelineno-64-14" id="__codelineno-64-14" name="__codelineno-64-14"></a>pathspec==0.12.1
</span><span id="__span-64-15"><a href="#__codelineno-64-15" id="__codelineno-64-15" name="__codelineno-64-15"></a>platformdirs==4.2.0
</span><span id="__span-64-16"><a href="#__codelineno-64-16" id="__codelineno-64-16" name="__codelineno-64-16"></a>python-dateutil==2.9.0.post0
</span><span id="__span-64-17"><a href="#__codelineno-64-17" id="__codelineno-64-17" name="__codelineno-64-17"></a>PyYAML==6.0.1
</span><span id="__span-64-18"><a href="#__codelineno-64-18" id="__codelineno-64-18" name="__codelineno-64-18"></a>pyyaml_env_tag==0.1
</span><span id="__span-64-19"><a href="#__codelineno-64-19" id="__codelineno-64-19" name="__codelineno-64-19"></a>six==1.16.0
</span><span id="__span-64-20"><a href="#__codelineno-64-20" id="__codelineno-64-20" name="__codelineno-64-20"></a>watchdog==4.0.0
</span></code></pre></div> Again, the only difference with the <code>pip list</code> command is that the package for <code>pip</code> is self is not listed.</p> <p>Overall, installing the required packages in a separate <code>venv</code> virtual Python environment is the simplest solution. There is a distinction between the packages managed by the Conda package manager and <code>pip</code>, with Conda managing only the Python distribution, and <code>pip</code> managing the environment packages and the <code>pip</code> installation. However, this distinction comes at the cost of replicating package installations, as unlike Conda, package files are not share in <code>venv</code> virtual Python environments.</p> <h5 id="installing-all-dependencies-from-pypi-with-pip-on-the-conda-environment">Installing all dependencies from PyPI with <code>pip</code> on the Conda environment<a class="headerlink" href="#installing-all-dependencies-from-pypi-with-pip-on-the-conda-environment" title="Permanent link">¶</a></h5> <p>The <code>pip</code> package manager is in fact able to install packages directly on the Conda environment! When the Conda environment is active, the system environment for <code>pip</code> is the Conda environment. Activate the Conda environment, and list the packages with <code>pip</code>: <div class="language-text highlight"><pre><span></span><code><span id="__span-65-1"><a href="#__codelineno-65-1" id="__codelineno-65-1" name="__codelineno-65-1"></a>$ micromamba activate mkdocs-coda
</span><span id="__span-65-2"><a href="#__codelineno-65-2" id="__codelineno-65-2" name="__codelineno-65-2"></a>(mkdocs-conda) $ pip list --format=freeze
</span><span id="__span-65-3"><a href="#__codelineno-65-3" id="__codelineno-65-3" name="__codelineno-65-3"></a>pip==24.0 
</span><span id="__span-65-4"><a href="#__codelineno-65-4" id="__codelineno-65-4" name="__codelineno-65-4"></a>setuptools==69.2.0
</span><span id="__span-65-5"><a href="#__codelineno-65-5" id="__codelineno-65-5" name="__codelineno-65-5"></a>wheel==0.43.0
</span></code></pre></div> Note that we use the <code>list</code> command instead of the <code>freeze</code> command to export all packages. We observe that the packages</p> <ul> <li><code>pip</code>,</li> <li><code>setuptools</code>, and</li> <li><code>wheel</code>,</li> </ul> <p>are installed with the Conda package manager, and are also visible in the output of <code>micromamba env export</code>.</p> <p><em>Do not mix package management tools!</em> Packages installed with the Conda package manager should be managed with Conda, and package installed with <code>pip</code> should be managed with <code>pip</code>. All the packages listed so far are installed with the Conda package manager and should not be updated or otherwise altered with <code>pip</code>.</p> <p>Now install the <code>mkdocs</code> and <code>mkdocs-minify-plugin</code> with <code>pip</code> while the <code>mkdocs-conda</code> environment is active: <div class="language-text highlight"><pre><span></span><code><span id="__span-66-1"><a href="#__codelineno-66-1" id="__codelineno-66-1" name="__codelineno-66-1"></a>(mkdocs-conda) $ pip install --upgrade mkdocs mkdocs-minify-plugin
</span></code></pre></div> Now all the dependencies are installed in the Conda environment, and can be listed with: <div class="language-text highlight"><pre><span></span><code><span id="__span-67-1"><a href="#__codelineno-67-1" id="__codelineno-67-1" name="__codelineno-67-1"></a>(mkdocs-conda) $ pip list --format=freeze
</span><span id="__span-67-2"><a href="#__codelineno-67-2" id="__codelineno-67-2" name="__codelineno-67-2"></a>$ pip list --format=freeze
</span><span id="__span-67-3"><a href="#__codelineno-67-3" id="__codelineno-67-3" name="__codelineno-67-3"></a>click==8.1.7
</span><span id="__span-67-4"><a href="#__codelineno-67-4" id="__codelineno-67-4" name="__codelineno-67-4"></a>csscompressor==0.9.5
</span><span id="__span-67-5"><a href="#__codelineno-67-5" id="__codelineno-67-5" name="__codelineno-67-5"></a>ghp-import==2.1.0
</span><span id="__span-67-6"><a href="#__codelineno-67-6" id="__codelineno-67-6" name="__codelineno-67-6"></a>htmlmin2==0.1.13
</span><span id="__span-67-7"><a href="#__codelineno-67-7" id="__codelineno-67-7" name="__codelineno-67-7"></a>Jinja2==3.1.3
</span><span id="__span-67-8"><a href="#__codelineno-67-8" id="__codelineno-67-8" name="__codelineno-67-8"></a>jsmin==3.0.1
</span><span id="__span-67-9"><a href="#__codelineno-67-9" id="__codelineno-67-9" name="__codelineno-67-9"></a>Markdown==3.6
</span><span id="__span-67-10"><a href="#__codelineno-67-10" id="__codelineno-67-10" name="__codelineno-67-10"></a>MarkupSafe==2.1.5
</span><span id="__span-67-11"><a href="#__codelineno-67-11" id="__codelineno-67-11" name="__codelineno-67-11"></a>mergedeep==1.3.4
</span><span id="__span-67-12"><a href="#__codelineno-67-12" id="__codelineno-67-12" name="__codelineno-67-12"></a>mkdocs==1.5.3
</span><span id="__span-67-13"><a href="#__codelineno-67-13" id="__codelineno-67-13" name="__codelineno-67-13"></a>mkdocs-minify-plugin==0.8.0
</span><span id="__span-67-14"><a href="#__codelineno-67-14" id="__codelineno-67-14" name="__codelineno-67-14"></a>packaging==24.0
</span><span id="__span-67-15"><a href="#__codelineno-67-15" id="__codelineno-67-15" name="__codelineno-67-15"></a>pathspec==0.12.1
</span><span id="__span-67-16"><a href="#__codelineno-67-16" id="__codelineno-67-16" name="__codelineno-67-16"></a>pip==24.0
</span><span id="__span-67-17"><a href="#__codelineno-67-17" id="__codelineno-67-17" name="__codelineno-67-17"></a>platformdirs==4.2.0
</span><span id="__span-67-18"><a href="#__codelineno-67-18" id="__codelineno-67-18" name="__codelineno-67-18"></a>python-dateutil==2.9.0.post0
</span><span id="__span-67-19"><a href="#__codelineno-67-19" id="__codelineno-67-19" name="__codelineno-67-19"></a>PyYAML==6.0.1
</span><span id="__span-67-20"><a href="#__codelineno-67-20" id="__codelineno-67-20" name="__codelineno-67-20"></a>pyyaml_env_tag==0.1
</span><span id="__span-67-21"><a href="#__codelineno-67-21" id="__codelineno-67-21" name="__codelineno-67-21"></a>setuptools==69.2.0
</span><span id="__span-67-22"><a href="#__codelineno-67-22" id="__codelineno-67-22" name="__codelineno-67-22"></a>six==1.16.0
</span><span id="__span-67-23"><a href="#__codelineno-67-23" id="__codelineno-67-23" name="__codelineno-67-23"></a>watchdog==4.0.0
</span><span id="__span-67-24"><a href="#__codelineno-67-24" id="__codelineno-67-24" name="__codelineno-67-24"></a>wheel==0.43.0
</span></code></pre></div></p> <p>Note that Conda is aware of which packages is meant to manage, listing the Conda packages <div class="language-text highlight"><pre><span></span><code><span id="__span-68-1"><a href="#__codelineno-68-1" id="__codelineno-68-1" name="__codelineno-68-1"></a>(mkdics-conda) $ micromamba env export --name mkdocs-conda
</span><span id="__span-68-2"><a href="#__codelineno-68-2" id="__codelineno-68-2" name="__codelineno-68-2"></a>name: mkdocs-conda
</span><span id="__span-68-3"><a href="#__codelineno-68-3" id="__codelineno-68-3" name="__codelineno-68-3"></a>channels:
</span><span id="__span-68-4"><a href="#__codelineno-68-4" id="__codelineno-68-4" name="__codelineno-68-4"></a>- conda-forge
</span><span id="__span-68-5"><a href="#__codelineno-68-5" id="__codelineno-68-5" name="__codelineno-68-5"></a>dependencies:
</span><span id="__span-68-6"><a href="#__codelineno-68-6" id="__codelineno-68-6" name="__codelineno-68-6"></a>- _libgcc_mutex=0.1=conda_forge
</span><span id="__span-68-7"><a href="#__codelineno-68-7" id="__codelineno-68-7" name="__codelineno-68-7"></a>- _openmp_mutex=4.5=2_gnu
</span><span id="__span-68-8"><a href="#__codelineno-68-8" id="__codelineno-68-8" name="__codelineno-68-8"></a>- bzip2=1.0.8=hd590300_5
</span><span id="__span-68-9"><a href="#__codelineno-68-9" id="__codelineno-68-9" name="__codelineno-68-9"></a>- ca-certificates=2024.2.2=hbcca054_0
</span><span id="__span-68-10"><a href="#__codelineno-68-10" id="__codelineno-68-10" name="__codelineno-68-10"></a>- ld_impl_linux-64=2.40=h41732ed_0
</span><span id="__span-68-11"><a href="#__codelineno-68-11" id="__codelineno-68-11" name="__codelineno-68-11"></a>- libexpat=2.6.2=h59595ed_0
</span><span id="__span-68-12"><a href="#__codelineno-68-12" id="__codelineno-68-12" name="__codelineno-68-12"></a>- libffi=3.4.2=h7f98852_5
</span><span id="__span-68-13"><a href="#__codelineno-68-13" id="__codelineno-68-13" name="__codelineno-68-13"></a>- libgcc-ng=13.2.0=h807b86a_5
</span><span id="__span-68-14"><a href="#__codelineno-68-14" id="__codelineno-68-14" name="__codelineno-68-14"></a>- libgomp=13.2.0=h807b86a_5
</span><span id="__span-68-15"><a href="#__codelineno-68-15" id="__codelineno-68-15" name="__codelineno-68-15"></a>- libnsl=2.0.1=hd590300_0
</span><span id="__span-68-16"><a href="#__codelineno-68-16" id="__codelineno-68-16" name="__codelineno-68-16"></a>- libsqlite=3.45.2=h2797004_0
</span><span id="__span-68-17"><a href="#__codelineno-68-17" id="__codelineno-68-17" name="__codelineno-68-17"></a>- libuuid=2.38.1=h0b41bf4_0
</span><span id="__span-68-18"><a href="#__codelineno-68-18" id="__codelineno-68-18" name="__codelineno-68-18"></a>- libxcrypt=4.4.36=hd590300_1
</span><span id="__span-68-19"><a href="#__codelineno-68-19" id="__codelineno-68-19" name="__codelineno-68-19"></a>- libzlib=1.2.13=hd590300_5
</span><span id="__span-68-20"><a href="#__codelineno-68-20" id="__codelineno-68-20" name="__codelineno-68-20"></a>- ncurses=6.4.20240210=h59595ed_0
</span><span id="__span-68-21"><a href="#__codelineno-68-21" id="__codelineno-68-21" name="__codelineno-68-21"></a>- openssl=3.2.1=hd590300_1
</span><span id="__span-68-22"><a href="#__codelineno-68-22" id="__codelineno-68-22" name="__codelineno-68-22"></a>- pip=24.0=pyhd8ed1ab_0
</span><span id="__span-68-23"><a href="#__codelineno-68-23" id="__codelineno-68-23" name="__codelineno-68-23"></a>- python=3.12.2=hab00c5b_0_cpython
</span><span id="__span-68-24"><a href="#__codelineno-68-24" id="__codelineno-68-24" name="__codelineno-68-24"></a>- readline=8.2=h8228510_1
</span><span id="__span-68-25"><a href="#__codelineno-68-25" id="__codelineno-68-25" name="__codelineno-68-25"></a>- setuptools=69.2.0=pyhd8ed1ab_0
</span><span id="__span-68-26"><a href="#__codelineno-68-26" id="__codelineno-68-26" name="__codelineno-68-26"></a>- tk=8.6.13=noxft_h4845f30_101
</span><span id="__span-68-27"><a href="#__codelineno-68-27" id="__codelineno-68-27" name="__codelineno-68-27"></a>- tzdata=2024a=h0c530f3_0
</span><span id="__span-68-28"><a href="#__codelineno-68-28" id="__codelineno-68-28" name="__codelineno-68-28"></a>- wheel=0.43.0=pyhd8ed1ab_0
</span><span id="__span-68-29"><a href="#__codelineno-68-29" id="__codelineno-68-29" name="__codelineno-68-29"></a>- xz=5.2.6=h166bdaf_0
</span></code></pre></div> we can see that the packages managed by Conda have not changed!</p> <p>Updating such a combined environment can be tricky. Start by updating all the Conda packages with <div class="language-text highlight"><pre><span></span><code><span id="__span-69-1"><a href="#__codelineno-69-1" id="__codelineno-69-1" name="__codelineno-69-1"></a>micromamba update --name mkdocs-conda --all
</span></code></pre></div> and then active the environment and update all the packages managed by <code>pip</code> one by one. Note that with the Conda environment active</p> <ul> <li>packages that appear in the output of <code>micromamba env export</code> and <code>pip list --format=freeze</code> are managed by Conda, and</li> <li>packages that appear in the output of <code>pip list --format=freeze</code> are managed by <code>pip</code>.</li> </ul> <p>Some Conda package managers integrate some function of the <code>pip</code> interface. For instance, recreating the same environment with official Conda package manager, <code>conda</code>, the packages exported are: <div class="language-text highlight"><pre><span></span><code><span id="__span-70-1"><a href="#__codelineno-70-1" id="__codelineno-70-1" name="__codelineno-70-1"></a>$ conda env export --name mkdocs-python
</span><span id="__span-70-2"><a href="#__codelineno-70-2" id="__codelineno-70-2" name="__codelineno-70-2"></a>name: mkdocs-python
</span><span id="__span-70-3"><a href="#__codelineno-70-3" id="__codelineno-70-3" name="__codelineno-70-3"></a>channels:
</span><span id="__span-70-4"><a href="#__codelineno-70-4" id="__codelineno-70-4" name="__codelineno-70-4"></a>  - conda-forge
</span><span id="__span-70-5"><a href="#__codelineno-70-5" id="__codelineno-70-5" name="__codelineno-70-5"></a>  - nodefaults
</span><span id="__span-70-6"><a href="#__codelineno-70-6" id="__codelineno-70-6" name="__codelineno-70-6"></a>dependencies:
</span><span id="__span-70-7"><a href="#__codelineno-70-7" id="__codelineno-70-7" name="__codelineno-70-7"></a>  - _libgcc_mutex=0.1=conda_forge
</span><span id="__span-70-8"><a href="#__codelineno-70-8" id="__codelineno-70-8" name="__codelineno-70-8"></a>  - _openmp_mutex=4.5=2_gnu
</span><span id="__span-70-9"><a href="#__codelineno-70-9" id="__codelineno-70-9" name="__codelineno-70-9"></a>  - bzip2=1.0.8=hd590300_5
</span><span id="__span-70-10"><a href="#__codelineno-70-10" id="__codelineno-70-10" name="__codelineno-70-10"></a>  - ca-certificates=2024.2.2=hbcca054_0
</span><span id="__span-70-11"><a href="#__codelineno-70-11" id="__codelineno-70-11" name="__codelineno-70-11"></a>  - ld_impl_linux-64=2.40=h41732ed_0
</span><span id="__span-70-12"><a href="#__codelineno-70-12" id="__codelineno-70-12" name="__codelineno-70-12"></a>  - libexpat=2.6.2=h59595ed_0
</span><span id="__span-70-13"><a href="#__codelineno-70-13" id="__codelineno-70-13" name="__codelineno-70-13"></a>  - libffi=3.4.2=h7f98852_5
</span><span id="__span-70-14"><a href="#__codelineno-70-14" id="__codelineno-70-14" name="__codelineno-70-14"></a>  - libgcc-ng=13.2.0=h807b86a_5
</span><span id="__span-70-15"><a href="#__codelineno-70-15" id="__codelineno-70-15" name="__codelineno-70-15"></a>  - libgomp=13.2.0=h807b86a_5
</span><span id="__span-70-16"><a href="#__codelineno-70-16" id="__codelineno-70-16" name="__codelineno-70-16"></a>  - libnsl=2.0.1=hd590300_0
</span><span id="__span-70-17"><a href="#__codelineno-70-17" id="__codelineno-70-17" name="__codelineno-70-17"></a>  - libsqlite=3.45.2=h2797004_0
</span><span id="__span-70-18"><a href="#__codelineno-70-18" id="__codelineno-70-18" name="__codelineno-70-18"></a>  - libuuid=2.38.1=h0b41bf4_0
</span><span id="__span-70-19"><a href="#__codelineno-70-19" id="__codelineno-70-19" name="__codelineno-70-19"></a>  - libxcrypt=4.4.36=hd590300_1
</span><span id="__span-70-20"><a href="#__codelineno-70-20" id="__codelineno-70-20" name="__codelineno-70-20"></a>  - libzlib=1.2.13=hd590300_5
</span><span id="__span-70-21"><a href="#__codelineno-70-21" id="__codelineno-70-21" name="__codelineno-70-21"></a>  - ncurses=6.4.20240210=h59595ed_0
</span><span id="__span-70-22"><a href="#__codelineno-70-22" id="__codelineno-70-22" name="__codelineno-70-22"></a>  - openssl=3.2.1=hd590300_1
</span><span id="__span-70-23"><a href="#__codelineno-70-23" id="__codelineno-70-23" name="__codelineno-70-23"></a>  - pip=24.0=pyhd8ed1ab_0
</span><span id="__span-70-24"><a href="#__codelineno-70-24" id="__codelineno-70-24" name="__codelineno-70-24"></a>  - python=3.12.2=hab00c5b_0_cpython
</span><span id="__span-70-25"><a href="#__codelineno-70-25" id="__codelineno-70-25" name="__codelineno-70-25"></a>  - readline=8.2=h8228510_1
</span><span id="__span-70-26"><a href="#__codelineno-70-26" id="__codelineno-70-26" name="__codelineno-70-26"></a>  - setuptools=69.2.0=pyhd8ed1ab_0
</span><span id="__span-70-27"><a href="#__codelineno-70-27" id="__codelineno-70-27" name="__codelineno-70-27"></a>  - tk=8.6.13=noxft_h4845f30_101
</span><span id="__span-70-28"><a href="#__codelineno-70-28" id="__codelineno-70-28" name="__codelineno-70-28"></a>  - tzdata=2024a=h0c530f3_0
</span><span id="__span-70-29"><a href="#__codelineno-70-29" id="__codelineno-70-29" name="__codelineno-70-29"></a>  - wheel=0.43.0=pyhd8ed1ab_0
</span><span id="__span-70-30"><a href="#__codelineno-70-30" id="__codelineno-70-30" name="__codelineno-70-30"></a>  - xz=5.2.6=h166bdaf_0
</span><span id="__span-70-31"><a href="#__codelineno-70-31" id="__codelineno-70-31" name="__codelineno-70-31"></a>  - pip:
</span><span id="__span-70-32"><a href="#__codelineno-70-32" id="__codelineno-70-32" name="__codelineno-70-32"></a>      - click==8.1.7
</span><span id="__span-70-33"><a href="#__codelineno-70-33" id="__codelineno-70-33" name="__codelineno-70-33"></a>      - csscompressor==0.9.5
</span><span id="__span-70-34"><a href="#__codelineno-70-34" id="__codelineno-70-34" name="__codelineno-70-34"></a>      - ghp-import==2.1.0
</span><span id="__span-70-35"><a href="#__codelineno-70-35" id="__codelineno-70-35" name="__codelineno-70-35"></a>      - htmlmin2==0.1.13
</span><span id="__span-70-36"><a href="#__codelineno-70-36" id="__codelineno-70-36" name="__codelineno-70-36"></a>      - jinja2==3.1.3
</span><span id="__span-70-37"><a href="#__codelineno-70-37" id="__codelineno-70-37" name="__codelineno-70-37"></a>      - jsmin==3.0.1
</span><span id="__span-70-38"><a href="#__codelineno-70-38" id="__codelineno-70-38" name="__codelineno-70-38"></a>      - markdown==3.6
</span><span id="__span-70-39"><a href="#__codelineno-70-39" id="__codelineno-70-39" name="__codelineno-70-39"></a>      - markupsafe==2.1.5
</span><span id="__span-70-40"><a href="#__codelineno-70-40" id="__codelineno-70-40" name="__codelineno-70-40"></a>      - mergedeep==1.3.4
</span><span id="__span-70-41"><a href="#__codelineno-70-41" id="__codelineno-70-41" name="__codelineno-70-41"></a>      - mkdocs==1.5.3
</span><span id="__span-70-42"><a href="#__codelineno-70-42" id="__codelineno-70-42" name="__codelineno-70-42"></a>      - mkdocs-minify-plugin==0.8.0
</span><span id="__span-70-43"><a href="#__codelineno-70-43" id="__codelineno-70-43" name="__codelineno-70-43"></a>      - packaging==24.0
</span><span id="__span-70-44"><a href="#__codelineno-70-44" id="__codelineno-70-44" name="__codelineno-70-44"></a>      - pathspec==0.12.1
</span><span id="__span-70-45"><a href="#__codelineno-70-45" id="__codelineno-70-45" name="__codelineno-70-45"></a>      - platformdirs==4.2.0
</span><span id="__span-70-46"><a href="#__codelineno-70-46" id="__codelineno-70-46" name="__codelineno-70-46"></a>      - python-dateutil==2.9.0.post0
</span><span id="__span-70-47"><a href="#__codelineno-70-47" id="__codelineno-70-47" name="__codelineno-70-47"></a>      - pyyaml==6.0.1
</span><span id="__span-70-48"><a href="#__codelineno-70-48" id="__codelineno-70-48" name="__codelineno-70-48"></a>      - pyyaml-env-tag==0.1
</span><span id="__span-70-49"><a href="#__codelineno-70-49" id="__codelineno-70-49" name="__codelineno-70-49"></a>      - six==1.16.0
</span><span id="__span-70-50"><a href="#__codelineno-70-50" id="__codelineno-70-50" name="__codelineno-70-50"></a>      - watchdog==4.0.0
</span><span id="__span-70-51"><a href="#__codelineno-70-51" id="__codelineno-70-51" name="__codelineno-70-51"></a>prefix: /home/gkaf/micromamba/envs/conda/envs/mkdocs-python
</span></code></pre></div> Note that in this output, <code>conda</code> package manager indicates correctly that the packages <code>pip</code>, <code>wheel</code>, and <code>setuptools</code> are managed by <code>conda</code>. Creating a clean environment with the resulting <code>YAML</code> file using the <code>--file</code> option will install the <code>pip</code> packages as well. Even though Micromamba does not support exporting the <code>pip</code> installed dependencies, it supports importing files with <code>pip</code> dependencies for compatibility.</p> <p><em>Despite any integration that <code>conda</code> offers for exporting <code>pip</code> installed packages, it is still the responsibility of the user to ensure that packages are managed with the correct package manager.</em></p> <h5 id="mixing-packages-from-conda-channels-and-pypi">Mixing packages from Conda channels and PyPI<a class="headerlink" href="#mixing-packages-from-conda-channels-and-pypi" title="Permanent link">¶</a></h5> <p>The <code>mkdocs</code> package is quite popular and as a result it is available through the conda-forge Conda channel. At the time of writing, the package <code>mkdocs-minify-plugin</code> is only available though PyPI. Given that the version on <code>mkdocs</code> in conda-forge is compatible with the version of <code>mkdocs-minify-plugin</code> in PyPI, you may consider installing the <code>mkdocs</code> from conda-forge, and <code>mkdocs-minify-plugin</code> from PyPI.</p> <p>Start by creating an empty Conda environment for Python, and install Python: <div class="language-text highlight"><pre><span></span><code><span id="__span-71-1"><a href="#__codelineno-71-1" id="__codelineno-71-1" name="__codelineno-71-1"></a>$ micromamba create --name mkdocs-conda
</span><span id="__span-71-2"><a href="#__codelineno-71-2" id="__codelineno-71-2" name="__codelineno-71-2"></a>$ micromamba install --name mkdocs-conda conda-forge::python
</span></code></pre></div> Then, install <code>mkdocs</code> from the conda-forge channel in the <code>mkdocs-conda</code> environment: <div class="language-text highlight"><pre><span></span><code><span id="__span-72-1"><a href="#__codelineno-72-1" id="__codelineno-72-1" name="__codelineno-72-1"></a>$ micromamba install --name mkdocs-conda conda-forge::mkdocs
</span></code></pre></div></p> <p>You have now installed <code>mkdocs</code> through the conda-forge channel in the Conda environment. There are now 2 options for installing <code>mkdocs-minify-plugin</code> from PyPI, you can install it</p> <ul> <li>in the Conda environment from PyPI with <code>pip</code>, or</li> <li>in an isolated <code>venv</code> virtual Python environment.</li> </ul> <p>The option of installing packages from PyPI in a Conda environment has already been discussed in the previous section. The most interesting option is installing <code>mkdocs-minify-plugin</code> in a <code>venv</code> that has access to the Conda environment package <code>mkdocs</code>.</p> <p>Create a <code>vanv</code> that has access to system packages with the command: <div class="language-text highlight"><pre><span></span><code><span id="__span-73-1"><a href="#__codelineno-73-1" id="__codelineno-73-1" name="__codelineno-73-1"></a>$ micromamba run --name mkdocs-conda python -m venv --system-site-packages ~/environments/mkdocs
</span></code></pre></div> The resulting configuration configuration file <div class="language-text highlight"><pre><span></span><code><span id="__span-74-1"><a href="#__codelineno-74-1" id="__codelineno-74-1" name="__codelineno-74-1"></a>$ cat ~/environments/mkdocs/pyvenv.cfg 
</span><span id="__span-74-2"><a href="#__codelineno-74-2" id="__codelineno-74-2" name="__codelineno-74-2"></a>home = /home/gkaf/micromamba/envs/mkdocs-conda/bin
</span><span id="__span-74-3"><a href="#__codelineno-74-3" id="__codelineno-74-3" name="__codelineno-74-3"></a>include-system-site-packages = true
</span><span id="__span-74-4"><a href="#__codelineno-74-4" id="__codelineno-74-4" name="__codelineno-74-4"></a>version = 3.12.2
</span><span id="__span-74-5"><a href="#__codelineno-74-5" id="__codelineno-74-5" name="__codelineno-74-5"></a>executable = /home/gkaf/micromamba/envs/mkdocs-conda/bin/python3.12
</span><span id="__span-74-6"><a href="#__codelineno-74-6" id="__codelineno-74-6" name="__codelineno-74-6"></a>command = /home/gkaf/micromamba/envs/mkdocs-conda/bin/python -m venv --system-site-packages /home/gkaf/environments/mkdocs
</span></code></pre></div> has the <code>include-system-site-packages</code> option enabled. Activate the environment and export the environment setup: <div class="language-text highlight"><pre><span></span><code><span id="__span-75-1"><a href="#__codelineno-75-1" id="__codelineno-75-1" name="__codelineno-75-1"></a>$ source ~/environments/mkdocs/bin/activate
</span><span id="__span-75-2"><a href="#__codelineno-75-2" id="__codelineno-75-2" name="__codelineno-75-2"></a>(mkdocs) $ pip freeze
</span><span id="__span-75-3"><a href="#__codelineno-75-3" id="__codelineno-75-3" name="__codelineno-75-3"></a>click @ file:///home/conda/feedstock_root/build_artifacts/click_1692311806742/work
</span><span id="__span-75-4"><a href="#__codelineno-75-4" id="__codelineno-75-4" name="__codelineno-75-4"></a>colorama @ file:///home/conda/feedstock_root/build_artifacts/colorama_1666700638685/work
</span><span id="__span-75-5"><a href="#__codelineno-75-5" id="__codelineno-75-5" name="__codelineno-75-5"></a>ghp-import @ file:///home/conda/feedstock_root/build_artifacts/ghp-import_1651585738538/work
</span><span id="__span-75-6"><a href="#__codelineno-75-6" id="__codelineno-75-6" name="__codelineno-75-6"></a>importlib_metadata @ file:///home/conda/feedstock_root/build_artifacts/importlib-metadata_1710971335535/work
</span><span id="__span-75-7"><a href="#__codelineno-75-7" id="__codelineno-75-7" name="__codelineno-75-7"></a>Jinja2 @ file:///home/conda/feedstock_root/build_artifacts/jinja2_1704966972576/work
</span><span id="__span-75-8"><a href="#__codelineno-75-8" id="__codelineno-75-8" name="__codelineno-75-8"></a>Markdown @ file:///home/conda/feedstock_root/build_artifacts/markdown_1710435156458/work
</span><span id="__span-75-9"><a href="#__codelineno-75-9" id="__codelineno-75-9" name="__codelineno-75-9"></a>MarkupSafe @ file:///home/conda/feedstock_root/build_artifacts/markupsafe_1706899920239/work
</span><span id="__span-75-10"><a href="#__codelineno-75-10" id="__codelineno-75-10" name="__codelineno-75-10"></a>mergedeep @ file:///home/conda/feedstock_root/build_artifacts/mergedeep_1612711302171/work
</span><span id="__span-75-11"><a href="#__codelineno-75-11" id="__codelineno-75-11" name="__codelineno-75-11"></a>mkdocs @ file:///home/conda/feedstock_root/build_artifacts/mkdocs_1695086541719/work
</span><span id="__span-75-12"><a href="#__codelineno-75-12" id="__codelineno-75-12" name="__codelineno-75-12"></a>packaging @ file:///home/conda/feedstock_root/build_artifacts/packaging_1710075952259/work
</span><span id="__span-75-13"><a href="#__codelineno-75-13" id="__codelineno-75-13" name="__codelineno-75-13"></a>pathspec @ file:///home/conda/feedstock_root/build_artifacts/pathspec_1702249949303/work
</span><span id="__span-75-14"><a href="#__codelineno-75-14" id="__codelineno-75-14" name="__codelineno-75-14"></a>platformdirs @ file:///home/conda/feedstock_root/build_artifacts/platformdirs_1706713388748/work
</span><span id="__span-75-15"><a href="#__codelineno-75-15" id="__codelineno-75-15" name="__codelineno-75-15"></a>python-dateutil @ file:///home/conda/feedstock_root/build_artifacts/python-dateutil_1709299778482/work
</span><span id="__span-75-16"><a href="#__codelineno-75-16" id="__codelineno-75-16" name="__codelineno-75-16"></a>PyYAML @ file:///home/conda/feedstock_root/build_artifacts/pyyaml_1695373450623/work
</span><span id="__span-75-17"><a href="#__codelineno-75-17" id="__codelineno-75-17" name="__codelineno-75-17"></a>pyyaml_env_tag @ file:///home/conda/feedstock_root/build_artifacts/pyyaml-env-tag_1624388951658/work
</span><span id="__span-75-18"><a href="#__codelineno-75-18" id="__codelineno-75-18" name="__codelineno-75-18"></a>setuptools==69.2.0
</span><span id="__span-75-19"><a href="#__codelineno-75-19" id="__codelineno-75-19" name="__codelineno-75-19"></a>six @ file:///home/conda/feedstock_root/build_artifacts/six_1620240208055/work
</span><span id="__span-75-20"><a href="#__codelineno-75-20" id="__codelineno-75-20" name="__codelineno-75-20"></a>typing_extensions @ file:///home/conda/feedstock_root/build_artifacts/typing_extensions_1708904622550/work
</span><span id="__span-75-21"><a href="#__codelineno-75-21" id="__codelineno-75-21" name="__codelineno-75-21"></a>watchdog @ file:///home/conda/feedstock_root/build_artifacts/watchdog_1707295114593/work
</span><span id="__span-75-22"><a href="#__codelineno-75-22" id="__codelineno-75-22" name="__codelineno-75-22"></a>wheel==0.43.0
</span><span id="__span-75-23"><a href="#__codelineno-75-23" id="__codelineno-75-23" name="__codelineno-75-23"></a>zipp @ file:///home/conda/feedstock_root/build_artifacts/zipp_1695255097490/work
</span></code></pre></div> The <code>freeze</code> command now list the packages that are provided by the environment and the packages that are provided by the system which in our case is our Conda environment.</p> <p>To recreate the environment from a YAML file with the environment specifications,</p> <ul> <li>enable the <code>include-system-site-packages</code> option during the creation of the new environment, and</li> <li>when installing the packages from the YAML file, ensure that all the dependences are located in the path mentioned in the specification file.</li> </ul> <p>Despite the face that the package manager exports the dependencies correctly, the user is still responsible for using the correct tool to manage the packages. Listing all the packages in the environment, <div class="language-text highlight"><pre><span></span><code><span id="__span-76-1"><a href="#__codelineno-76-1" id="__codelineno-76-1" name="__codelineno-76-1"></a>(mkdocs) $ pip list --format=freeze
</span><span id="__span-76-2"><a href="#__codelineno-76-2" id="__codelineno-76-2" name="__codelineno-76-2"></a>click==8.1.7
</span><span id="__span-76-3"><a href="#__codelineno-76-3" id="__codelineno-76-3" name="__codelineno-76-3"></a>colorama==0.4.6
</span><span id="__span-76-4"><a href="#__codelineno-76-4" id="__codelineno-76-4" name="__codelineno-76-4"></a>ghp-import==2.1.0
</span><span id="__span-76-5"><a href="#__codelineno-76-5" id="__codelineno-76-5" name="__codelineno-76-5"></a>importlib_metadata==7.1.0
</span><span id="__span-76-6"><a href="#__codelineno-76-6" id="__codelineno-76-6" name="__codelineno-76-6"></a>Jinja2==3.1.3
</span><span id="__span-76-7"><a href="#__codelineno-76-7" id="__codelineno-76-7" name="__codelineno-76-7"></a>Markdown==3.6
</span><span id="__span-76-8"><a href="#__codelineno-76-8" id="__codelineno-76-8" name="__codelineno-76-8"></a>MarkupSafe==2.1.5
</span><span id="__span-76-9"><a href="#__codelineno-76-9" id="__codelineno-76-9" name="__codelineno-76-9"></a>mergedeep==1.3.4
</span><span id="__span-76-10"><a href="#__codelineno-76-10" id="__codelineno-76-10" name="__codelineno-76-10"></a>mkdocs==1.5.3
</span><span id="__span-76-11"><a href="#__codelineno-76-11" id="__codelineno-76-11" name="__codelineno-76-11"></a>packaging==24.0
</span><span id="__span-76-12"><a href="#__codelineno-76-12" id="__codelineno-76-12" name="__codelineno-76-12"></a>pathspec==0.12.1
</span><span id="__span-76-13"><a href="#__codelineno-76-13" id="__codelineno-76-13" name="__codelineno-76-13"></a>pip==24.0
</span><span id="__span-76-14"><a href="#__codelineno-76-14" id="__codelineno-76-14" name="__codelineno-76-14"></a>platformdirs==4.2.0
</span><span id="__span-76-15"><a href="#__codelineno-76-15" id="__codelineno-76-15" name="__codelineno-76-15"></a>python-dateutil==2.9.0
</span><span id="__span-76-16"><a href="#__codelineno-76-16" id="__codelineno-76-16" name="__codelineno-76-16"></a>PyYAML==6.0.1
</span><span id="__span-76-17"><a href="#__codelineno-76-17" id="__codelineno-76-17" name="__codelineno-76-17"></a>pyyaml_env_tag==0.1
</span><span id="__span-76-18"><a href="#__codelineno-76-18" id="__codelineno-76-18" name="__codelineno-76-18"></a>setuptools==69.2.0
</span><span id="__span-76-19"><a href="#__codelineno-76-19" id="__codelineno-76-19" name="__codelineno-76-19"></a>six==1.16.0
</span><span id="__span-76-20"><a href="#__codelineno-76-20" id="__codelineno-76-20" name="__codelineno-76-20"></a>typing_extensions==4.10.0
</span><span id="__span-76-21"><a href="#__codelineno-76-21" id="__codelineno-76-21" name="__codelineno-76-21"></a>watchdog==4.0.0
</span><span id="__span-76-22"><a href="#__codelineno-76-22" id="__codelineno-76-22" name="__codelineno-76-22"></a>wheel==0.43.0
</span><span id="__span-76-23"><a href="#__codelineno-76-23" id="__codelineno-76-23" name="__codelineno-76-23"></a>zipp==3.17.0
</span></code></pre></div> we can see that <code>pip</code> lists all the packages irrespective of whether they are installed in the environment of the system. <em>The advantage of using a <code>venv</code> however, is that any change made with <code>pip</code> will be local to the <code>venv</code> and will simply override without altering the Conda installation.</em></p> <h4 id="combining-conda-with-pip-to-install-a-python-source-package">Combining Conda with <code>pip</code> to install a Python source package<a class="headerlink" href="#combining-conda-with-pip-to-install-a-python-source-package" title="Permanent link">¶</a></h4> <p>Let's consider the installation of the <a href="https://github.com/yig/PySPQR">PySPQR</a> module that wraps the SuiteSparseQR decomposition function for use with SciPy. Installing this software is challenging because</p> <ul> <li>the PySPQR package is not available through Conda channels, and</li> <li>installing PySPQR (<code>sparseqr</code>) directly in a <code>venv</code> fails. </li> </ul> <p>The PySPQR package is a source code package and its installation in a <code>venv</code> requires linking with the <a href="https://people.engr.tamu.edu/davis/suitesparse.html">SuiteSparse</a> library. We can install SparseSuite in our system (e.g. <code>apt-get install libsuitesparse-dev</code> in Debian), but we will avoid modifying system libraries and use a Conda environment instead.</p> <p>A Conda environment is a directory with packages where you can install anything you need with a compatible package manager like Micromamba. Create an environment with all the required dependencies: <div class="language-text highlight"><pre><span></span><code><span id="__span-77-1"><a href="#__codelineno-77-1" id="__codelineno-77-1" name="__codelineno-77-1"></a>$ micromamba env create --name python-suitesparse
</span><span id="__span-77-2"><a href="#__codelineno-77-2" id="__codelineno-77-2" name="__codelineno-77-2"></a>$ micromamba install conda-forge::python conda-forge::suitesparse --name python-suitesparse
</span></code></pre></div></p> <p>The package <code>conda-forge::suitesparse</code> is effectively what <code>apt-get install libsuitesparse-dev</code> installs globally in a Deabian based system, but now it is only available in the Conda environment <code>python-suitesparse</code>.</p> <p>You are not going to use <code>python-suitesparse</code> directly though! You will use the Python installed in <code>python-suitesparse</code> to create a venv where you will install <code>sparseqr</code>.</p> <p>Create a venv with the Python of <code>python-suitesparse</code> like this: <div class="language-text highlight"><pre><span></span><code><span id="__span-78-1"><a href="#__codelineno-78-1" id="__codelineno-78-1" name="__codelineno-78-1"></a>$ micromamba run --name python-suitesparse python -m venv ~/environments/PySPQR
</span></code></pre></div> This will create a venv in <code>~/environments/PySPQR</code>, and since it is created with the python of the <code>python-suitesparse</code> Conda environment, SuiteSparse is now available inside the environment.</p> <p>Activate your new environment, and install <code>sparseqr</code> with any method you prefer, I have chosen to use the PyPI repo: <div class="language-text highlight"><pre><span></span><code><span id="__span-79-1"><a href="#__codelineno-79-1" id="__codelineno-79-1" name="__codelineno-79-1"></a>$ source ~/environments/PySPQR/bin/activate
</span><span id="__span-79-2"><a href="#__codelineno-79-2" id="__codelineno-79-2" name="__codelineno-79-2"></a>(PySPQR) $ pip install --upgrade setuptools sparseqr
</span><span id="__span-79-3"><a href="#__codelineno-79-3" id="__codelineno-79-3" name="__codelineno-79-3"></a>(PySPQR) $ python
</span><span id="__span-79-4"><a href="#__codelineno-79-4" id="__codelineno-79-4" name="__codelineno-79-4"></a>&gt;&gt;&gt; import sparseqr
</span></code></pre></div> Note that <code>setuptools</code> is also required and must be installed manually in a venv since PySPQR is a source package.</p> <p><strong>N.B.</strong> When installing source packages from PyPI ensure that <code>setuptools</code> is available in your environment. The <code>setuptools</code> library is used to package Python projects, and it is required by source packages to build the source code.</p> <p>After the first Python <code>import</code> command, your package should compile successfully. After that, the package should be available for import without the need to compile again.</p> <p>For future use activate the <code>venv</code> environment with <div class="language-text highlight"><pre><span></span><code><span id="__span-80-1"><a href="#__codelineno-80-1" id="__codelineno-80-1" name="__codelineno-80-1"></a>$ source ~/environments/PySPQR/bin/activate
</span></code></pre></div> and deactivate with <div class="language-text highlight"><pre><span></span><code><span id="__span-81-1"><a href="#__codelineno-81-1" id="__codelineno-81-1" name="__codelineno-81-1"></a>(PySPQR) $ deactivate
</span></code></pre></div></p> <h3 id="managing-packages-in-r">Managing packages in R<a class="headerlink" href="#managing-packages-in-r" title="Permanent link">¶</a></h3> <p>The R program has a built-in package manager. Assuming that you have access to an installation of R, the R system contains 2 utilities that allow the installation of packages in 3 different modes. First, there is the built-in package manager that can instal packages</p> <ul> <li>in system wide accessible locations for packages that should be available to all users (requires elevated privileges), or</li> <li>in user specific location for packages that are accessible to the current user only.</li> </ul> <p>There are default locations where the built-in package manager searches for packages. The user specific locations take precedence over system locations. The package manager search path can be extended by the user to include bespoke locations. There is also the Packrat package manager which installs packages</p> <ul> <li>in project directories, with the packages being available in an environment isolated within the project directory.</li> </ul> <p>The Packrat package manager is available as an R package. When creating an environment within a project directory, the environment is activated automatically when starting R in the project directory (but not in its subdirectories due to the implementation of Packrat).</p> <p>In your local system you can install packages in any mode. In the HPC systems, you can only install packages in the user accessible location, so you are limited to user and project wide installations. Nevertheless, the HPC installation of R includes a number of commonly used packages, such as <code>dbplyr</code> and <code>tidyverse</code>. You should check if the package you require is installed and that the installed version provides the functionality you need before installing any packages locally. Remember, local package installations consume space and inodes against personal or project quota.</p> <h4 id="installing-r-packages-locally-and-globally">Installing R packages locally and globally<a class="headerlink" href="#installing-r-packages-locally-and-globally" title="Permanent link">¶</a></h4> <p>Be default R installs packages system wide. When R detects that it does not have write access to the system directories it suggests installing packages for the current user only.</p> <p>Start and interactive session and then load the R module and start R: <div class="language-bash highlight"><pre><span></span><code><span id="__span-82-1"><a href="#__codelineno-82-1" id="__codelineno-82-1" name="__codelineno-82-1"></a>$<span class="w"> </span>module<span class="w"> </span>load<span class="w"> </span>lang/R
</span><span id="__span-82-2"><a href="#__codelineno-82-2" id="__codelineno-82-2" name="__codelineno-82-2"></a>$<span class="w"> </span>R
</span></code></pre></div> You can list the directories where R is installing and looking for new packages using the function <code>.libPaths()</code> <div class="language-R highlight"><pre><span></span><code><span id="__span-83-1"><a href="#__codelineno-83-1" id="__codelineno-83-1" name="__codelineno-83-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span>
</span><span id="__span-83-2"><a href="#__codelineno-83-2" id="__codelineno-83-2" name="__codelineno-83-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/apps/resif/aion/2020b/epyc/software/R/4.0.5-foss-2020b/lib64/R/library"</span>
</span></code></pre></div> If you haven't installed any libraries, only the system path appears in the path where R is looking for libraries. Now, try installing for instance the Packrat package globally with the <code>install.packages</code> command. <div class="language-R highlight"><pre><span></span><code><span id="__span-84-1"><a href="#__codelineno-84-1" id="__codelineno-84-1" name="__codelineno-84-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">"packrat"</span><span class="p">))</span>
</span><span id="__span-84-2"><a href="#__codelineno-84-2" id="__codelineno-84-2" name="__codelineno-84-2"></a><span class="n">Warning</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">"packrat"</span><span class="p">))</span><span class="w"> </span><span class="o">:</span>
</span><span id="__span-84-3"><a href="#__codelineno-84-3" id="__codelineno-84-3" name="__codelineno-84-3"></a><span class="w">  </span><span class="s">'lib = "/mnt/irisgpfs/apps/resif/aion/2020b/epyc/software/R/4.0.5-foss-2020b/lib64/R/library"'</span><span class="w"> </span><span class="n">is</span><span class="w"> </span><span class="n">not</span><span class="w"> </span><span class="n">writable</span>
</span><span id="__span-84-4"><a href="#__codelineno-84-4" id="__codelineno-84-4" name="__codelineno-84-4"></a><span class="n">Would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">personal</span><span class="w"> </span><span class="n">library</span><span class="w"> </span><span class="n">instead</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="n">No</span><span class="o">/</span><span class="n">cancel</span><span class="p">)</span><span class="w"> </span><span class="n">yes</span>
</span><span id="__span-84-5"><a href="#__codelineno-84-5" id="__codelineno-84-5" name="__codelineno-84-5"></a><span class="n">Would</span><span class="w"> </span><span class="n">you</span><span class="w"> </span><span class="n">like</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">create</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">personal</span><span class="w"> </span><span class="n">library</span>
</span><span id="__span-84-6"><a href="#__codelineno-84-6" id="__codelineno-84-6" name="__codelineno-84-6"></a>‘<span class="o">~/</span><span class="n">R</span><span class="o">/</span><span class="n">x86_64</span><span class="o">-</span><span class="n">pc</span><span class="o">-</span><span class="n">linux</span><span class="o">-</span><span class="n">gnu</span><span class="o">-</span><span class="n">library</span><span class="o">/</span><span class="m">4.0</span>’
</span><span id="__span-84-7"><a href="#__codelineno-84-7" id="__codelineno-84-7" name="__codelineno-84-7"></a><span class="n">to</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">packages</span><span class="w"> </span><span class="n">into</span><span class="o">?</span><span class="w"> </span><span class="p">(</span><span class="n">yes</span><span class="o">/</span><span class="n">No</span><span class="o">/</span><span class="n">cancel</span><span class="p">)</span><span class="w"> </span><span class="n">yes</span>
</span><span id="__span-84-8"><a href="#__codelineno-84-8" id="__codelineno-84-8" name="__codelineno-84-8"></a><span class="o">---</span><span class="w"> </span><span class="n">Please</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">CRAN</span><span class="w"> </span><span class="n">mirror</span><span class="w"> </span><span class="n">for</span><span class="w"> </span><span class="n">use</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="n">session</span><span class="w"> </span><span class="o">---</span>
</span><span id="__span-84-9"><a href="#__codelineno-84-9" id="__codelineno-84-9" name="__codelineno-84-9"></a><span class="n">Secure</span><span class="w"> </span><span class="n">CRAN</span><span class="w"> </span><span class="n">mirrors</span>
</span></code></pre></div> Select any mirror apart from <code>1: 0-Cloud [https]</code>; usually mirrors closer to your physical location will provide better bandwidth. After selecting a mirror the download and installation of the package proceeds automatically.</p> <p>Note that after failing to install the package in the system directory, R creates an installation directory for the user in their home directory <code>~/R/x86_64-pc-linux-gnu-library/4.0</code> and installs the package for the user only. After the installation, you can check the path where R is looking for packages again. <div class="language-R highlight"><pre><span></span><code><span id="__span-85-1"><a href="#__codelineno-85-1" id="__codelineno-85-1" name="__codelineno-85-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span>
</span><span id="__span-85-2"><a href="#__codelineno-85-2" id="__codelineno-85-2" name="__codelineno-85-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/R/x86_64-pc-linux-gnu-library/4.0"</span>
</span><span id="__span-85-3"><a href="#__codelineno-85-3" id="__codelineno-85-3" name="__codelineno-85-3"></a><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/apps/resif/aion/2020b/epyc/software/R/4.0.5-foss-2020b/lib64/R/library"</span>
</span></code></pre></div> Now R will look for packages in the user directory first (<code>/mnt/irisgpfs</code> is another path for <code>/home</code> that appears in the <code>${HOME}</code> variable). Note by the naming convention that R uses when it creates the directory for installing user packages, you can have multiple minor versions of R installed, and their packages will not interfere with each other. For instance,</p> <ul> <li>R version 4.0.5 installs packages in <code>~/R/x86_64-pc-linux-gnu-library/4.0</code>, and</li> <li>R version 4.3.2 installs packages in <code>~/R/x86_64-pc-linux-gnu-library/4.3</code>.</li> </ul> <p>Some useful commands for managing packages are,</p> <ul> <li><code>installed.packages()</code> to list installed packages and various information regarding each package installation,</li> <li><code>old.packages()</code> to list outdated packages,</li> <li><code>update.packages()</code> to update installed packages, and</li> <li><code>remove.packages(c("packrat"))</code> to remove packages.</li> </ul> <p>To list the loaded packages, use the command <div class="language-R highlight"><pre><span></span><code><span id="__span-86-1"><a href="#__codelineno-86-1" id="__codelineno-86-1" name="__codelineno-86-1"></a><span class="nf">search</span><span class="p">()</span>
</span></code></pre></div> and to get a detailed description of the environment, use the command <div class="language-R highlight"><pre><span></span><code><span id="__span-87-1"><a href="#__codelineno-87-1" id="__codelineno-87-1" name="__codelineno-87-1"></a><span class="nf">sessionInfo</span><span class="p">()</span>
</span></code></pre></div> which provides information about the version of R, the OS, and loaded packages.</p> <p>To load a library that has been installed use the command <code>library</code>. For instance, <div class="language-R highlight"><pre><span></span><code><span id="__span-88-1"><a href="#__codelineno-88-1" id="__codelineno-88-1" name="__codelineno-88-1"></a><span class="nf">library</span><span class="p">(</span><span class="n">packrat</span><span class="p">)</span>
</span></code></pre></div> where you cam notice that the use of quotes is optional and only a single can be loaded at a time. The <code>library</code> function causes an error when the loading of a package fails, so R provides the function <code>require</code> which returns the status of the package loading operation in a return variable, and is design for use inside R functions.</p> <p><em>Useful resources</em></p> <ul> <li><a href="https://www.datacamp.com/tutorial/r-packages-guide">R Packages: A Beginner's Tutorial</a></li> <li><a href="https://bookdown.org/csgillespie/efficientR/set-up.html">Efficient R programming: Efficient set-up</a></li> </ul> <h4 id="configuring-installation-paths-in-r">Configuring installation paths in R<a class="headerlink" href="#configuring-installation-paths-in-r" title="Permanent link">¶</a></h4> <p>So far we have only used the default installation paths of R. However, in a local installation where the user has rights to install in the system directories (e.g. in a Conda environment with R) the user installation directory is not created automatically. Open an R session in an interactive session in the HPC cluster or in your personal machine. To get the location where user packages are installed call <div class="language-R highlight"><pre><span></span><code><span id="__span-89-1"><a href="#__codelineno-89-1" id="__codelineno-89-1" name="__codelineno-89-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">Sys.getenv</span><span class="p">(</span><span class="s">"R_LIBS_USER"</span><span class="p">)</span>
</span><span id="__span-89-2"><a href="#__codelineno-89-2" id="__codelineno-89-2" name="__codelineno-89-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/home/&lt;user name&gt;/R/x86_64-conda-linux-gnu-library/4.3"</span>
</span></code></pre></div> which will print an environment variable, <code>R_LIBS_USER</code>, which is set by R and stores the default location for storing user packages. If you create the directory with <div class="language-bash highlight"><pre><span></span><code><span id="__span-90-1"><a href="#__codelineno-90-1" id="__codelineno-90-1" name="__codelineno-90-1"></a>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span>/home/&lt;user<span class="w"> </span>name&gt;/R/x86_64-conda-linux-gnu-library/4.3
</span></code></pre></div> then you can print the locations where R is searching for packages (after reloading R), and the default location should appear first in the list. For instance for o Conda installation of R using the Micromamba package manager, the paths printed are <div class="language-R highlight"><pre><span></span><code><span id="__span-91-1"><a href="#__codelineno-91-1" id="__codelineno-91-1" name="__codelineno-91-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span>
</span><span id="__span-91-2"><a href="#__codelineno-91-2" id="__codelineno-91-2" name="__codelineno-91-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/home/&lt;user name&gt;/R/x86_64-conda-linux-gnu-library/4.3"</span>
</span><span id="__span-91-3"><a href="#__codelineno-91-3" id="__codelineno-91-3" name="__codelineno-91-3"></a><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="s">"/home/&lt;user name&gt;/micromamba/envs/R/lib/R/library"</span>
</span></code></pre></div> where R is installed in a Conda environment named <code>R</code> in the second entry of the search path.</p> <p>There are now multiple locations where packages are stored. The location used by default is the first in the list. Thus, after creating the default location for user installed packages, packages are installed by default in user wide mode. For instance, installing the Packrat package, <div class="language-R highlight"><pre><span></span><code><span id="__span-92-1"><a href="#__codelineno-92-1" id="__codelineno-92-1" name="__codelineno-92-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">"packrat"</span><span class="p">))</span>
</span></code></pre></div> listing the user installation directory <div class="language-bash highlight"><pre><span></span><code><span id="__span-93-1"><a href="#__codelineno-93-1" id="__codelineno-93-1" name="__codelineno-93-1"></a>$<span class="w"> </span>ls<span class="w"> </span><span class="s2">"/home/&lt;user name&gt;/R/x86_64-conda-linux-gnu-library/4.3"</span>
</span><span id="__span-93-2"><a href="#__codelineno-93-2" id="__codelineno-93-2" name="__codelineno-93-2"></a>packrat
</span></code></pre></div> will show the directory with the installed Packrat package files. To install the package in a system wide installation, use the <code>lib</code>flag <div class="language-R highlight"><pre><span></span><code><span id="__span-94-1"><a href="#__codelineno-94-1" id="__codelineno-94-1" name="__codelineno-94-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">"packrat"</span><span class="p">),</span><span class="w"> </span><span class="n">lib</span><span class="o">=</span><span class="s">"/home/&lt;user name&gt;/micromamba/envs/R/lib/R/library"</span><span class="p">)</span>
</span></code></pre></div> to specify the installation location. During loading, all directories in the path are searched consecutively until the package is located.</p> <p>The package installation paths can also be used to maintain multiple independent environments in R. For instance, you can maintain a personal environment and project environment for your research group. Lets consider the case where you want the create an environment in a project directory. First, create a directory for the R environment <div class="language-bash highlight"><pre><span></span><code><span id="__span-95-1"><a href="#__codelineno-95-1" id="__codelineno-95-1" name="__codelineno-95-1"></a>$<span class="w"> </span>mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">"</span><span class="si">${</span><span class="nv">PROJECTHOME</span><span class="si">}</span><span class="s2">&lt;project name&gt;/R-environment"</span>
</span></code></pre></div> where the variable <code>PROJECTHOME</code> is defined in the UL HPC system environment to point to the home of the project directories (and includes a trailing slash '/'). To install a package in the project environment, call the installation function with the appropriate <code>lib</code> argument <div class="language-R highlight"><pre><span></span><code><span id="__span-96-1"><a href="#__codelineno-96-1" id="__codelineno-96-1" name="__codelineno-96-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">"packrat"</span><span class="p">),</span><span class="w"> </span><span class="n">lib</span><span class="o">=</span><span class="nf">paste0</span><span class="p">(</span><span class="w"> </span><span class="nf">Sys.getenv</span><span class="p">(</span><span class="s">"PROJECTHOME"</span><span class="p">),</span><span class="w"> </span><span class="s">"&lt;project name&gt;/"</span><span class="p">,</span><span class="w"> </span><span class="s">"R-environment"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
</span></code></pre></div> and follow the typical instructions. To load the package, you now must also specify the location of the library, <div class="language-R highlight"><pre><span></span><code><span id="__span-97-1"><a href="#__codelineno-97-1" id="__codelineno-97-1" name="__codelineno-97-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">library</span><span class="p">(</span><span class="w"> </span><span class="n">packrat</span><span class="p">,</span><span class="w"> </span><span class="n">lib.loc</span><span class="o">=</span><span class="nf">paste0</span><span class="p">(</span><span class="w"> </span><span class="nf">Sys.getenv</span><span class="p">(</span><span class="s">"PROJECTHOME"</span><span class="p">),</span><span class="w"> </span><span class="s">"&lt;project name&gt;/"</span><span class="p">,</span><span class="w"> </span><span class="s">"R-environment"</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">)</span>
</span></code></pre></div> similar to the installation. Environment options can be used to extent the library paths and avoid having to specify the library path in each command.</p> <p>A startup file mechanism is provided by R to set up user and project wide environment options. There are 2 kinds of file,</p> <ul> <li><code>.Renviron</code> files used to set-up environment variables for R, and</li> <li><code>.Rprofile</code> files used to run any R code during initialization.</li> </ul> <p>Note that <code>.Renviron</code> files are simply a list of <div class="language-text highlight"><pre><span></span><code><span id="__span-98-1"><a href="#__codelineno-98-1" id="__codelineno-98-1" name="__codelineno-98-1"></a>key=value
</span></code></pre></div> assignment pairs which are read by R, not proper bash code (adding an <code>export</code> modifier is a syntax error). There are 2 locations where startup files appear,</p> <ul> <li>the home directory, <code>~/.Renviron</code> and <code>~/.Rprofile</code>, for user wide settings, and</li> <li>project directories for project wide settings.</li> </ul> <p>The definitions in project <code>.Rprofile</code> files override the user wide definitions in <code>~/.Rprofile</code>. The definitions in <code>.Renviron</code> files supersede the definitions in <code>~/.Renviron</code>, that is if the project has an environment file, the user wide definitions are ignored. Note that R is designed to source setup files at the directory where R starts, and any setup files in parent or descendent directories are ignored.</p> <p>Both the profile and environment startup files can setup a user wide environment. For instance, to use an environment setup in the project directories of the UL HPC systems add in the user wide environment setup file, <code>~/.Renviron</code>, the entry <div class="language-text highlight"><pre><span></span><code><span id="__span-99-1"><a href="#__codelineno-99-1" id="__codelineno-99-1" name="__codelineno-99-1"></a>R_LIBS=${PROJECTHOME}&lt;project name&gt;/R-environment
</span></code></pre></div> and then reload R. The new library path is <div class="language-R highlight"><pre><span></span><code><span id="__span-100-1"><a href="#__codelineno-100-1" id="__codelineno-100-1" name="__codelineno-100-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span>
</span><span id="__span-100-2"><a href="#__codelineno-100-2" id="__codelineno-100-2" name="__codelineno-100-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/projects/&lt;project name&gt;/R-environment"</span>
</span><span id="__span-100-3"><a href="#__codelineno-100-3" id="__codelineno-100-3" name="__codelineno-100-3"></a><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/R/x86_64-pc-linux-gnu-library/4.0"</span>
</span><span id="__span-100-4"><a href="#__codelineno-100-4" id="__codelineno-100-4" name="__codelineno-100-4"></a><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/apps/resif/iris-rhel8/2020b/broadwell/software/R/4.0.5-foss-2020b/lib64/R/library"</span>
</span></code></pre></div> assuming that all directories appearing in the path exist. Note that the setup file options precede any default options.</p> <p>We can also use startup files to setup project wide libraries. For instance, assume that we are working on a project in a directory named <code>project</code> and the R packages are stored in a subdirectory <code>R-environment</code>. We use a project profile, to still be able to use any library paths defined in the user wide environment file. Add in a file <code>project/.Rprofile</code> the following definitions, <div class="language-R highlight"><pre><span></span><code><span id="__span-101-1"><a href="#__codelineno-101-1" id="__codelineno-101-1" name="__codelineno-101-1"></a><span class="n">project_path</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">paste0</span><span class="p">(</span><span class="w"> </span><span class="nf">getwd</span><span class="p">(),</span><span class="w"> </span><span class="s">"/R-environment"</span><span class="w"> </span><span class="p">)</span>
</span><span id="__span-101-2"><a href="#__codelineno-101-2" id="__codelineno-101-2" name="__codelineno-101-2"></a><span class="n">newpaths</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w"> </span><span class="n">project_path</span><span class="p">,</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span><span class="w"> </span><span class="p">)</span>
</span><span id="__span-101-3"><a href="#__codelineno-101-3" id="__codelineno-101-3" name="__codelineno-101-3"></a><span class="nf">.libPaths</span><span class="p">(</span><span class="w"> </span><span class="n">newpaths</span><span class="w"> </span><span class="p">)</span>
</span></code></pre></div> and then start R in the <code>project</code> directory. The new library path is <div class="language-R highlight"><pre><span></span><code><span id="__span-102-1"><a href="#__codelineno-102-1" id="__codelineno-102-1" name="__codelineno-102-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span>
</span><span id="__span-102-2"><a href="#__codelineno-102-2" id="__codelineno-102-2" name="__codelineno-102-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/Documents/project/R-environment"</span>
</span><span id="__span-102-3"><a href="#__codelineno-102-3" id="__codelineno-102-3" name="__codelineno-102-3"></a><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/projects/&lt;project name&gt;/R-environment"</span>
</span><span id="__span-102-4"><a href="#__codelineno-102-4" id="__codelineno-102-4" name="__codelineno-102-4"></a><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/R/x86_64-pc-linux-gnu-library/4.0"</span>
</span><span id="__span-102-5"><a href="#__codelineno-102-5" id="__codelineno-102-5" name="__codelineno-102-5"></a><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/apps/resif/iris-rhel8/2020b/broadwell/software/R/4.0.5-foss-2020b/lib64/R/library"</span>
</span></code></pre></div> were the local project settings override the user and system wide settings. This is effectively a local project environment.</p> <h4 id="installing-packages-in-r-project-directories-with-packrat">Installing packages in R project directories with Packrat<a class="headerlink" href="#installing-packages-in-r-project-directories-with-packrat" title="Permanent link">¶</a></h4> <p>The Packrat library is used to automate the creation and management of project based environments. Packrat also automates operations such as tracking the version of the packages installed in the environment with snapshots, and saving the snapshot information in a text file that can be version controlled. The R distribution available through the UL HPC modules has a fairly old version of Packrat, which nevertheless supports all the basic features. Packrat is a light package, so you can install a more modern version in a user wide mode or in some environment accessible to all the users of a UL HPC project.</p> <p>To initialize the project, for instance in the directory <code>~/Documents/project</code>, use the commands: <div class="language-R highlight"><pre><span></span><code><span id="__span-103-1"><a href="#__codelineno-103-1" id="__codelineno-103-1" name="__codelineno-103-1"></a><span class="nf">library</span><span class="p">(</span><span class="n">packrat</span><span class="p">)</span>
</span><span id="__span-103-2"><a href="#__codelineno-103-2" id="__codelineno-103-2" name="__codelineno-103-2"></a><span class="n">packrat</span><span class="o">::</span><span class="nf">init</span><span class="p">(</span><span class="s">"~/Document/project"</span><span class="p">)</span>
</span></code></pre></div> The initialization command creates, - a directory <code>~/Document/project/packrat</code> to store the packages, and - a setup script <code>~/Document/project/.Rprofile</code> to initialize the project. Therefore, start R within the project directory <code>~/Document/packrat</code>, to activate the project environment. After initializing the project or whenever you start R in the project directory, the <code>packrat</code> directory and its subdirectories will be the only ones appearing in the library paths: <div class="language-R highlight"><pre><span></span><code><span id="__span-104-1"><a href="#__codelineno-104-1" id="__codelineno-104-1" name="__codelineno-104-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">.libPaths</span><span class="p">()</span>
</span><span id="__span-104-2"><a href="#__codelineno-104-2" id="__codelineno-104-2" name="__codelineno-104-2"></a><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/Documents/project/packrat/lib/x86_64-pc-linux-gnu/4.0.5"</span><span class="w">    </span>
</span><span id="__span-104-3"><a href="#__codelineno-104-3" id="__codelineno-104-3" name="__codelineno-104-3"></a><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/Documents/project/packrat/lib-ext/x86_64-pc-linux-gnu/4.0.5"</span>
</span><span id="__span-104-4"><a href="#__codelineno-104-4" id="__codelineno-104-4" name="__codelineno-104-4"></a><span class="p">[</span><span class="m">3</span><span class="p">]</span><span class="w"> </span><span class="s">"/mnt/irisgpfs/users/&lt;user name&gt;/Documents/project/packrat/lib-R/x86_64-pc-linux-gnu/4.0.5"</span>
</span></code></pre></div> Execute all package operations as usual. For instance, to install the <code>plyr</code> package, use the command: <div class="language-R highlight"><pre><span></span><code><span id="__span-105-1"><a href="#__codelineno-105-1" id="__codelineno-105-1" name="__codelineno-105-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">"plyr"</span><span class="p">))</span>
</span></code></pre></div> All packages are stored in the <code>packrat</code> subdirectory of the project.</p> <p>Packrat stores the status of the project in the file <code>packrat/packrat.lock</code>. This file stores the precise package versions that were used to satisfy dependencies, including dependencies of dependencies, and should not be edited by hand. After any change in the installed packages run the command <div class="language-R highlight"><pre><span></span><code><span id="__span-106-1"><a href="#__codelineno-106-1" id="__codelineno-106-1" name="__codelineno-106-1"></a><span class="n">packrat</span><span class="o">::</span><span class="nf">snapshot</span><span class="p">()</span>
</span></code></pre></div> to update the file. You can use the command <div class="language-R highlight"><pre><span></span><code><span id="__span-107-1"><a href="#__codelineno-107-1" id="__codelineno-107-1" name="__codelineno-107-1"></a><span class="n">packrat</span><span class="o">::</span><span class="nf">status</span><span class="p">()</span>
</span></code></pre></div> to analyze the code in the project directory and get a report regarding the status of extraneous or missing packages. After running the <code>status</code> command, you can run <div class="language-R highlight"><pre><span></span><code><span id="__span-108-1"><a href="#__codelineno-108-1" id="__codelineno-108-1" name="__codelineno-108-1"></a><span class="n">packrat</span><span class="o">::</span><span class="nf">clean</span><span class="p">()</span>
</span></code></pre></div> to remove any unused packages. Finally, after restoring the <code>packrat/packrat.lock</code> file from a version control system, or if <code>status</code> detects a missing package, use the command <div class="language-R highlight"><pre><span></span><code><span id="__span-109-1"><a href="#__codelineno-109-1" id="__codelineno-109-1" name="__codelineno-109-1"></a><span class="n">packrat</span><span class="o">::</span><span class="nf">restore</span><span class="p">()</span>
</span></code></pre></div> to install any missing packages.</p> <p><em>Useful resources</em></p> <ul> <li><a href="https://rstudio.github.io/packrat/walkthrough.html">Official Packrat tutorial</a></li> </ul> <h4 id="issues-with-managing-packages-with-the-native-r-package-managers">Issues with managing packages with the native R package managers<a class="headerlink" href="#issues-with-managing-packages-with-the-native-r-package-managers" title="Permanent link">¶</a></h4> <p>The native package manager of R is quite potent, and there are packages such as Packrat that further extend its capabilities. However, there are some drawbacks in installing packages with the native tools. Consider for instance installing the <code>hdf5r</code> package, a package used to read and write binary files, that is quite popular in HPC engineering applications. The installation mode is not important for our demonstration purposes, but assume that you are performing a user wide installation. <div class="language-R highlight"><pre><span></span><code><span id="__span-110-1"><a href="#__codelineno-110-1" id="__codelineno-110-1" name="__codelineno-110-1"></a><span class="o">&gt;</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">"hdf5r"</span><span class="p">))</span>
</span></code></pre></div></p> <p>During the installation, you can see that R is compiling the package components. This can be advantageous is the compilation process is tailored to optimize the build for the underlying system configuration. If you use the module available in the UL HPC systems, it is configured to use the main components of the FOSS tool chain (you can see that by calling <code>module list</code> after loading R), so the compiled packages are well optimized.</p> <p><strong>N.B.</strong> If you encounter any issues with missing packages load the whole FOSS tool chain module with the command, <div class="language-bash highlight"><pre><span></span><code><span id="__span-111-1"><a href="#__codelineno-111-1" id="__codelineno-111-1" name="__codelineno-111-1"></a>module<span class="w"> </span>load<span class="w"> </span>toolchain/foss
</span></code></pre></div> as there are a few popular packages missing in the dependencies of R.</p> <p>However, if you want to avoid compiling packages from source, which can be quite time consuming, you can use binary distributions of R. These include the distributions provided though native package managers in various Linux distributions, like APT and YUM, as well as Conda package managers like Mamba.</p> <!--

Conda can be used as an environment manager and combined with other package management tools to install packages. For instance, you can install Python in an environment with Conda, and manage packages in the environment with [PiPY](https://pip.pypa.io/en/stable/getting-started/), or create subenvironments with project package management tools such as  Let's see a few examples.

### Software installation in Python environments

Python packages are available through Conda channels. However, many channels, are only available through PyPI (the Python Package Index). You have 2 options regarding the installation of packaged from PyPI,

- install directly in the Micromamba environments, or
- install in an isolated "Python virtual environment" (`venv`).

`add ReachabilityAnalysis, ModelingToolkit`

#### Installing Conda inside a Micromamba environment




## Combining Conda with other package and environment management tools

It may be desirable to use Conda to manage environments but a different tool to manage packages, such as [`pip`](https://pip.pypa.io/en/stable/getting-started/).

Conda integrates well with any such tool. Some of the most frequent cases are described bellow.

### Managing packages with external tools

Quite often a package that is required in an environment is not available through a Conda channel, but it is available through some other distribution channel, such as the [Python Package Index (PyPI)](https://pypi.org/). In these cases the only solution is to create a Conda environment and install the required packages with `pip` from the Python Package Index.

Using an external packaging tool is possible because of the method that Conda uses to install packages. Conda installs package versions in a central directory (e.g. `~/micromamba/pkgs`). Any environment that requires a package links to the central directory with _hard links_. Links are added to the home directory (e.g. `~/micromamba/envs/R-project` for the `R-project` environment) of any environment that requires them. When using an external package tool, package components are installed in the same directory where Conda would install the corresponding link. Thus, external package management tools integrate seamlessly with Conda, with a couple of caveats:

- each package must be managed by one tool, otherwise package components will get overwritten, and
- packages installed by the package tool are specific to an environment and cannot be shared as with Conda, since components are installed directly and not with links.

**Prefer Conda over external package managers:** Installing the same package in multiple environments with an external package tool consumes quotas in terms of [storage space and number of files](../../filesystems/quotas/#current-usage), so prefer Conda when possible. This is particularly important for the `inode` limit, since some packages install a large number of files, and the hard links used by Conda do not consume inodes or [disk space](https://stackoverflow.com/questions/55566419/why-are-packages-installed-rather-than-just-linked-to-a-specific-environment).

#### Pip

In this example `pip` is used to manage packages in a Conda environment with [MkDocs](https://www.mkdocs.org/) related packages. To install the packages, create an environment
<div class="language-bash highlight"><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1" href="#__codelineno-112-1"></a>micromamba<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>mkdocs
</span></code></pre></div>
activate the environment,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1" href="#__codelineno-113-1"></a>micromamba<span class="w"> </span>activate<span class="w"> </span>mkdocs
</span></code></pre></div>
and install `pip`
<div class="language-bash highlight"><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1" href="#__codelineno-114-1"></a>micromamba<span class="w"> </span>install<span class="w"> </span>--channel<span class="w"> </span>conda-forge<span class="w"> </span>pip
</span></code></pre></div>
which will be used to install the remaining packages.

The `pip` will be the only package that will be managed with Conda. For instance, to update Pip activate the environment,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1" href="#__codelineno-115-1"></a>micromamba<span class="w"> </span>activate<span class="w"> </span>mkdocs
</span></code></pre></div>
and run
<div class="language-bash highlight"><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1" href="#__codelineno-116-1"></a>micromaba<span class="w"> </span>update<span class="w"> </span>--all
</span></code></pre></div>
to update all installed packaged (only `pip` in our case). All other packages are managed by `pip`.

For instance, assume that a `mkdocs` project requires the following packages:

- `mkdocs`
- `mkdocs-minify-plugin`

The package `mkdocs-minify-plugin` is less popular and thus is is not available though a Conda channel, but it is available in PyPI. To install it, activate the `mkdocs` environment
<div class="language-bash highlight"><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1" href="#__codelineno-117-1"></a>micromamba<span class="w"> </span>activate<span class="w"> </span>mkdocs
</span></code></pre></div>
and install the required packages with `pip`
<div class="language-bash highlight"><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1" href="#__codelineno-118-1"></a>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>mkdocs<span class="w"> </span>mkdocs-minify-plugin
</span></code></pre></div>
inside the environment. The packages will be installed inside a directory that `micromamba` created for the Conda environment, for instance
<div class="language-text highlight"><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1" href="#__codelineno-119-1"></a>${HOME}/micromamba/envs/mkdocs
</span></code></pre></div>
along side packages installed by `micromamba`. As a results, 'system-wide' installations with `pip` inside a Conda environment do not interfere with system packages.

**Do not install packages in Conda environments with pip as a user:** User installed packages (e.g.`pip install --user --upgrade mkdocs-minify-plugin`) are installed in the same directory for all environments, typically in `~/.local/`, and can interfere with other versions of the same package installed from other Conda environments.

#### Pkg

The Julia programming language provides its own package and environment manager, Pkg. The package manager of Julia provides many useful capabilities and it is recommended that it is used with Julia projects. Details about the use of Pkg can be found in the official [documentation](https://pkgdocs.julialang.org/v1/).

The Pkg package manager comes packages with Julia. Start by creating an environment,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1" href="#__codelineno-120-1"></a>mocromamba<span class="w"> </span>env<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>julia
</span></code></pre></div>
activate the environment,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1" href="#__codelineno-121-1"></a>micromamba<span class="w"> </span>activate<span class="w"> </span>julia
</span></code></pre></div>
and install Julia,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1" href="#__codelineno-122-1"></a>micromamba<span class="w"> </span>install<span class="w"> </span>--channel<span class="w"> </span>conda-forge<span class="w"> </span>julia
</span></code></pre></div>
to start using Pkg.

In order to install a Julia package, activate the Julia environment, and start an interactive REPL session,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1" href="#__codelineno-123-1"></a>$<span class="w"> </span>julia
</span><span id="__span-123-2"><a id="__codelineno-123-2" name="__codelineno-123-2" href="#__codelineno-123-2"></a>julia&gt;
</span></code></pre></div>
by just calling `julia` without any input files.

- Enter the Pkg package manager by pressing `]`.
- Exit the package manager by clearing all the input from the line with backspace, and then pressing backspace one more time.

In the package manager you can see the status of the current environment,
<div class="language-julia highlight"><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1" href="#__codelineno-124-1"></a><span class="p">(</span><span class="nd">@julia</span><span class="p">)</span><span class="w"> </span><span class="n">pkg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">status</span>
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2" href="#__codelineno-124-2"></a><span class="n">Status</span><span class="w"> </span><span class="sb">`~/micromamba/envs/julia/share/julia/environments/julia/Project.toml`</span><span class="w"> </span><span class="p">(</span><span class="n">empty</span><span class="w"> </span><span class="n">project</span><span class="p">)</span>
</span></code></pre></div>
add or remove packages,
<div class="language-julia highlight"><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1" href="#__codelineno-125-1"></a><span class="p">(</span><span class="nd">@julia</span><span class="p">)</span><span class="w"> </span><span class="n">pkg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">add</span><span class="w"> </span><span class="n">Example</span>
</span><span id="__span-125-2"><a id="__codelineno-125-2" name="__codelineno-125-2" href="#__codelineno-125-2"></a><span class="p">(</span><span class="nd">@julia</span><span class="p">)</span><span class="w"> </span><span class="n">pkg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">remove</span><span class="w"> </span><span class="n">Example</span>
</span></code></pre></div>
update the packages in the environment,
<div class="language-julia highlight"><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1" href="#__codelineno-126-1"></a><span class="p">(</span><span class="nd">@julia</span><span class="p">)</span><span class="w"> </span><span class="n">pkg</span><span class="o">&gt;</span><span class="w"> </span><span class="n">update</span>
</span></code></pre></div>
and perform many other operations, such as exporting and importing environments from plain text files which describe the environment setup, and pinning packages to specific versions. The Pkg package manager maintains a global environment, but also supports the creation and use of local environments that are used within a project directory. The use of local environments is highly recommended, please read the [documentation](https://pkgdocs.julialang.org/v1/environments/) for more information.

After installing the Julia language in a Conda environment, the language distribution itself should be managed with `micromamba` and all packages in global or local environments with the Pkg package manager. To update Julia activate the Conda environment where Julia is stored and call
<div class="language-bash highlight"><pre><span></span><code><span id="__span-127-1"><a id="__codelineno-127-1" name="__codelineno-127-1" href="#__codelineno-127-1"></a>micromamba<span class="w"> </span>update<span class="w"> </span>julia
</span></code></pre></div>
where as to update packages installed with Pgk use the `update` command of Pkg. The packages for local and global environments are stored in the Julia installation directory, typically
<div class="language-text highlight"><pre><span></span><code><span id="__span-128-1"><a id="__codelineno-128-1" name="__codelineno-128-1" href="#__codelineno-128-1"></a>${HOME}/micromamba/envs/julia/share
</span></code></pre></div>
if the default location for the Micromamba environment directory is used.

_Useful resources_

- [Pkg documentation](https://pkgdocs.julialang.org/v1/)

**Advanced management of package data**

Julia packages will consume [storage and number of files quota](../../filesystems/quotas/#current-usage). Pkg uses automatic garbage collection to cleanup packages that are no longer is use. In general you don't need to manage then package data, simply remove the package and its data will be deleted automatically after some time. However, when you exceed your quota you need to delete files immediately.

The _immediate removal_ of the data of uninstalled packages can be forced with the command:
<div class="language-julia highlight"><pre><span></span><code><span id="__span-129-1"><a id="__codelineno-129-1" name="__codelineno-129-1" href="#__codelineno-129-1"></a><span class="k">using</span><span class="w"> </span><span class="n">Pkg</span>
</span><span id="__span-129-2"><a id="__codelineno-129-2" name="__codelineno-129-2" href="#__codelineno-129-2"></a><span class="k">using</span><span class="w"> </span><span class="n">Dates</span>
</span><span id="__span-129-3"><a id="__codelineno-129-3" name="__codelineno-129-3" href="#__codelineno-129-3"></a><span class="n">Pkg</span><span class="o">.</span><span class="n">gc</span><span class="p">(;</span><span class="n">collect_delay</span><span class="o">=</span><span class="n">Dates</span><span class="o">.</span><span class="n">Day</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</span></code></pre></div>
Make sure that the packages have been removed from all the environments that use them

_Sources_: [Immediate package data clean up](https://discourse.julialang.org/t/packages-clean-up-general-julia-data-consumption/56198)

### Combining Conda with external environment management tools

Quite often it is required to create isolated environments using external tools. For instance, tools such as [`virtualenv`](https://virtualenv.pypa.io/en/latest/) can install and manage a Python distribution in a given directory and export and import environment descriptions from text files. This functionalities allows for instance the shipping of a description of the Python environment as part of a project. Higher level tools such as [`pipenv`](https://pipenv.pypa.io/en/latest) automate the process by managing the Python environment as part of a project directory. The description of the environment is stored in version controlled files, and the Python packages are stored in a non-tracked directory within the project directory. Some wholistic project management tools, such as [`poetry`](https://python-poetry.org/), further integrate the management of the Python environment withing the project management workflow.

Installing and using in Conda environments tools that create isolated environments is relatively straight forward. Create an environment where only the required that tool is installed, and manage any subenvironments using the installed tool.

**Create a different environment for each tool:** While this is not a requirement it is a good practice. For instance, `pipenv` and `poetry` used to and may still have conflicting dependencies; Conda detects the dependency and aborts the conflicting installation.

#### Pipenv

To demonstrate the usage of `pipenv`, create a Conda environment,
<div class="language-bash highlight"><pre><span></span><code><span id="__span-130-1"><a id="__codelineno-130-1" name="__codelineno-130-1" href="#__codelineno-130-1"></a>micromamba<span class="w"> </span>enc<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span>pipenv
</span></code></pre></div>
activate it
<div class="language-bash highlight"><pre><span></span><code><span id="__span-131-1"><a id="__codelineno-131-1" name="__codelineno-131-1" href="#__codelineno-131-1"></a>micromamba<span class="w"> </span>activate<span class="w"> </span>pipenv
</span></code></pre></div>
and install the `pipenv` package
<div class="language-bash highlight"><pre><span></span><code><span id="__span-132-1"><a id="__codelineno-132-1" name="__codelineno-132-1" href="#__codelineno-132-1"></a>micromamba<span class="w"> </span>install<span class="w"> </span>--channel<span class="w"> </span>conda-forge<span class="w"> </span>pipenv
</span></code></pre></div>
 as the only package in this environment. Now the `pipenv` is managed with Conda, for instance to update `pipenv` activate the environment
<div class="language-bash highlight"><pre><span></span><code><span id="__span-133-1"><a id="__codelineno-133-1" name="__codelineno-133-1" href="#__codelineno-133-1"></a>micromamba<span class="w"> </span>activate<span class="w"> </span>pipenv
</span></code></pre></div>
and call
<div class="language-bash highlight"><pre><span></span><code><span id="__span-134-1"><a id="__codelineno-134-1" name="__codelineno-134-1" href="#__codelineno-134-1"></a>micromamba<span class="w"> </span>update<span class="w"> </span>--all
</span></code></pre></div>
to update the single installed package. Inside the environment use `pipenv` as usual to create and manage project environments.



---

### When a Conda environment is useful


The environment of a project is composed by 2 components,

- the _system environment components_ such as software and environment variables, and
- the _packages_ required by the various software systems of the environment.

For instance, assume that you have a project with R scripts that need some R packages and you manage the project with Packrat. Then,

- the installation of R and various environment variables are the project environment, and
- the packages installed and managed with Packrat are the packages of the project.

In this case Packrat manages the packages of the project, and the system manages the environment, most importantly the version of R.

**Mixing environment and package management:** Some tools, especially in Python, partially mix the functionality of environment and package management. For instance, in a project with Python scripts where the packages are managed by `venv`, due to the design of Python some environment variables must be setup by `venv` so that Python can detect the local packages. For this reason, users have to activate a `venv` environment to access local packages, something not required by Packrat in R. However, `venv` is not a full environment manager as it cannot modify some important aspects of the environment, such as the Python installation.

Conda environments are able to manage both the project environment, and the project packages. It is left to the user to chose what components they will mange with Conda and what with native tools. For instance, the user may choose to manage the R version with Conda and packages with Packrat.

Given that using Conda adds a layer of complexity in the management of your software stack, there are 2 cases that justify the extra work of using Conda.

- The first case is when a software system is only available through Conda, and not as a module or container.
- The second case is when there are multiple software systems in a project and it is more convenient to handle all project packages with a single tool instead of multiple native tools.
--> <!--
- The first reason is when the packages of a project require a version of a software system (e.g. R, Python, or Julia) that is not available through a module or a container. For instance, a Python package may require Python>=3.10.x but only version 3.8.x is available.
- The second reason is when there are multiple software systems in a project (e.g. Python and R) and it is more convenient to handle all project packages with a single tool instead of multiple native tools. For instance a project with Python and R scripts needs both venv and Packrat to handle packages.
--> <!--
## Conda as an environment manager

Conda is the preferred method to install software system when they are not available though the conventional channels of modules and containers. These are a few typical cases where you may consider using a Conda environment.

- A software system is not available through modules or containers. In this case install the software system through Conda.
- A software system is available, but not in a version required by a dependency. For instance, a Python package may require Python>=3.10.x but only version 3.8.x is available. In this case install the required version through Conda.
- A dependency is available only through a native package manager, but the required package manager version is not supported by the environments offered through modules or containers. In this case setup the required environment with Conda.

### Conda as a package manager

Conda is a very capable package manager. A particular attractive feature of Conda is that it can handle dependencies from multiple software systems in the same environment. For instance in a project using Python and R and it can be more convenient to handle all project packages with Conda instead of multiple native tools, such as venv for Python and Packrat for R.

If you plan to use Conda just to manage packages, you may also consider using a native package management tool. In some cases more packages are distributed with native tools.

- In Julia all packages are distributed _only_ through the native package manager Pkg.
- In Python most packages are distributed through Conda, but a few nice packages are available through the native package manager Pip only.
- In R all packages are available through Conda; just append the prefix `r-` to the name of the package.

Some native package mangers offer useful features, such as setting up isolated environments inside a project directory. Project environments automatically trace dependencies in a text file inside the project directory. This allow easy version control of the dependencies. Tools that offer automatic dependency logging include

- Packrat for R,
- venv (partially automated), pipenv, and poetry for Python, and
- Pgk for Julia.

Conda can log dependencies too. However, the process is manual, as Conda is not designed to maintain an environment inside a project directory.






## Overview of environment and package management

This overview discusses R and Python package management. These 2 software systems follow a somewhat different approach in the organization of their package management. R provides its own package management utilities that are strictly used for managing packages and avoid modifying the environment. On the other hand the package management utilities of Python often modify the environment as well. While the approach of R is much cleaner and easier to follow, the approach of Python significantly simplifies some package management operations. Conda further expands on the approach used by Python by seamlessly integrating the environment and package management.

### Installing the R and Python software systems

In the ULHPC systems, R and Python are provided as [modules](../cli/modules.md). In many Linux distributions R is provided as a [package](https://cran.r-project.org/). Python is also available as a package in many distributions, however, in many distributions Python is now a core package. Various other packages in the distribution depend on the Python core package, which implies that

- the system is limited in the versions of Python shipped by the distribution, and
- packages are managed only by the distribution package manager; using any external Python package manager can break the system!

To avoid the limitations of the package manager of you distribution, you can always use an autonomous environment manager such as Conda to install the R and Python software systems. An additional advantage of using an environment manager is that you can use the exact same software distribution in your local machine, the HPC system, and any other computer.

--> <!--
You could use the scratch directories to install packages. However, the file system for the scratch directories is slow in handling small files. It is better if you use the scratch directory for scratch data, large files you upload temporarily for processing, and computation temporary and raw output.
--> <!--
https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/libPaths
https://www.r-bloggers.com/2020/10/customizing-your-package-library-location/
https://zkamvar.github.io/blog/using-a-custom-library-in-r/
https://support.posit.co/hc/en-us/articles/360047157094-Managing-R-with-Rprofile-Renviron-Rprofile-site-Renviron-site-rsession-conf-and-repos-conf
https://cran.r-project.org/web/packages/startup/vignettes/startup-intro.html

https://r4ds.had.co.nz/index.html
https://rstudio-education.github.io/hopr/

https://www.tidyverse.org/

https://cran.r-project.org/doc/manuals/R-intro.pdf

https://www.carc.usc.edu/user-information/user-guides/software-and-programming/singularity
--> <!--
TO DO:

- `conda-mirror`: https://github.com/conda-incubator/conda-mirror
- Creating custom channels: https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/create-custom-channels.html
- Building conda packages from scratch: https://docs.conda.io/projects/conda-build/en/latest/user-guide/tutorials/build-pkgs.html

Conda internals: Rpath using $ORIGIN

https://stackoverflow.com/questions/42344932/how-to-include-correctly-wl-rpath-origin-linker-argument-in-a-makefile
--> <hr/> <div class="md-source-file"> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">March 26, 2024 20:02:54</span> <br/> Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">March 26, 2024 20:02:54</span> </small> </div> <form class="md-feedback" hidden="" name="feedback"> <fieldset> <legend class="md-feedback__title"> Was this page helpful? </legend> <div class="md-feedback__inner"> <div class="md-feedback__list"> <button class="md-feedback__icon md-icon" data-md-value="1" title="This page was helpful" type="submit"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81Z"></path></svg> </button> <button class="md-feedback__icon md-icon" data-md-value="0" title="This page could be improved" type="submit"> <svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14Z"></path></svg> </button> </div> <div class="md-feedback__note"> <div data-md-value="1" hidden=""> Thanks for your feedback! </div> <div data-md-value="0" hidden=""> Thanks for your feedback! Help us improve this page by using our <a href="https://github.com/NCCLUX/NCC-Trainings/issues/new?title=[Feedback]+Best%20practises+-+/environment/best-practises/" rel="noopener" target="_blank">feedback form</a>. </div> </div> </div> </fieldset> </form> </article> </div> </div> </main> <footer class="md-footer"> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class="md-copyright"> <div class="md-copyright__highlight"> Copyright © 2023-2025 <a href="https://supercomputing.lu/">SuperComputing Luxembourg</a> </div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a> </div> <div class="md-social"> <a class="md-social__link" href="https://twitter.com/EuroCC_Lux" rel="noopener" target="_blank" title="twitter.com"> <svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg> </a> <a class="md-social__link" href="https://www.linkedin.com/company/eurocc-luxembourg/" rel="noopener" target="_blank" title="www.linkedin.com"> <svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!-- Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class="md-dialog" data-md-component="dialog"> <div class="md-dialog__inner md-typeset"></div> </div> <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.footer"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src="../../assets/javascripts/bundle.ce72ebac.min.js"></script> <script src="../../javascripts/mathjax.js"></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>